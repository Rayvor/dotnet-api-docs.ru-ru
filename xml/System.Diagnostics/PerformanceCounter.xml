<Type Name="PerformanceCounter" FullName="System.Diagnostics.PerformanceCounter">
  <Metadata><Meta Name="ms.openlocfilehash" Value="7591c4d562acc741f3e653388824b1e47025e3fa" /><Meta Name="ms.sourcegitcommit" Value="367e1eae0725e6da7136cd073aaa856ded5d5c29" /><Meta Name="ms.translationtype" Value="HT" /><Meta Name="ms.contentlocale" Value="ru-RU" /><Meta Name="ms.lasthandoff" Value="12/13/2019" /><Meta Name="ms.locfileid" Value="75026967" /></Metadata><TypeSignature Language="C#" Value="public sealed class PerformanceCounter : System.ComponentModel.Component, System.ComponentModel.ISupportInitialize" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi sealed beforefieldinit PerformanceCounter extends System.ComponentModel.Component implements class System.ComponentModel.ISupportInitialize" />
  <TypeSignature Language="DocId" Value="T:System.Diagnostics.PerformanceCounter" />
  <TypeSignature Language="VB.NET" Value="Public NotInheritable Class PerformanceCounter&#xA;Inherits Component&#xA;Implements ISupportInitialize" />
  <TypeSignature Language="C++ CLI" Value="public ref class PerformanceCounter sealed : System::ComponentModel::Component, System::ComponentModel::ISupportInitialize" />
  <TypeSignature Language="F#" Value="type PerformanceCounter = class&#xA;    inherit Component&#xA;    interface ISupportInitialize" />
  <AssemblyInfo>
    <AssemblyName>System</AssemblyName>
    <AssemblyVersion>1.0.5000.0</AssemblyVersion>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <AssemblyInfo>
    <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
    <AssemblyVersion>4.0.1.0</AssemblyVersion>
  </AssemblyInfo>
  <Base>
    <BaseTypeName>System.ComponentModel.Component</BaseTypeName>
  </Base>
  <Interfaces>
    <Interface>
      <InterfaceName>System.ComponentModel.ISupportInitialize</InterfaceName>
    </Interface>
  </Interfaces>
  <Attributes>
    <Attribute FrameworkAlternate="xamarinmac-3.0">
      <AttributeName>System.ComponentModel.InstallerType(typeof(System.Diagnostics.PerformanceCounterInstaller))</AttributeName>
    </Attribute>
    <Attribute FrameworkAlternate="netframework-1.1">
      <AttributeName>System.ComponentModel.Designer("Microsoft.VisualStudio.Install.PerformanceCounterDesigner, Microsoft.VisualStudio, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
    </Attribute>
    <Attribute FrameworkAlternate="netframework-1.1">
      <AttributeName>System.ComponentModel.InstallerType("System.Diagnostics.PerformanceCounterInstaller,System.Configuration.Install, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
    </Attribute>
    <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5">
      <AttributeName>System.ComponentModel.InstallerType("System.Diagnostics.PerformanceCounterInstaller,System.Configuration.Install, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
    </Attribute>
    <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
      <AttributeName>System.ComponentModel.InstallerType("System.Diagnostics.PerformanceCounterInstaller,System.Configuration.Install, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
    </Attribute>
  </Attributes>
  <Docs>
    <summary><span data-ttu-id="8c50d-101">Представляет компонент счетчика производительности Windows NT.</span><span class="sxs-lookup"><span data-stu-id="8c50d-101">Represents a Windows NT performance counter component.</span></span></summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-102">Компонент <xref:System.Diagnostics.PerformanceCounter> можно использовать для считывания существующих предопределенных или пользовательских счетчиков и публикации (записи) данных производительности в пользовательские счетчики.</span><span class="sxs-lookup"><span data-stu-id="8c50d-102">The <xref:System.Diagnostics.PerformanceCounter> component can be used for both reading existing predefined or custom counters and publishing (writing) performance data to custom counters.</span></span>  
  
 <span data-ttu-id="8c50d-103">В [диалоговом окне Добавление счетчиков](https://go.microsoft.com/fwlink/p/?LinkId=257854)в системном мониторе Windows имеется множество предопределенных счетчиков.</span><span class="sxs-lookup"><span data-stu-id="8c50d-103">There are numerous predefined counters listed in the Windows Performance Monitor's [Add Counters dialog box](https://go.microsoft.com/fwlink/p/?LinkId=257854).</span></span> <span data-ttu-id="8c50d-104">Дополнительные сведения о счетчиках производительности .NET Framework см. в разделе [счетчики производительности](~/docs/framework/debug-trace-profile/performance-counters.md).</span><span class="sxs-lookup"><span data-stu-id="8c50d-104">To learn about the .NET Framework performance counters, see [Performance Counters](~/docs/framework/debug-trace-profile/performance-counters.md).</span></span>  
  
 <span data-ttu-id="8c50d-105">Этот тип реализует интерфейс <xref:System.IDisposable>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-105">This type implements the <xref:System.IDisposable> interface.</span></span> <span data-ttu-id="8c50d-106">По окончании использования выдаленную ему память следует прямо или косвенно освободить.</span><span class="sxs-lookup"><span data-stu-id="8c50d-106">When you have finished using the type, you should dispose of it either directly or indirectly.</span></span> <span data-ttu-id="8c50d-107">Чтобы сделать это прямо, вызовите его метод <xref:System.IDisposable.Dispose%2A> в блоке `try`/`catch`.</span><span class="sxs-lookup"><span data-stu-id="8c50d-107">To dispose of the type directly, call its <xref:System.IDisposable.Dispose%2A> method in a `try`/`catch` block.</span></span> <span data-ttu-id="8c50d-108">Чтобы сделать это косвенно, используйте языковые конструкции, такие как `using` (в C#) или `Using` (в Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="8c50d-108">To dispose of it indirectly, use a language construct such as `using` (in C#) or `Using` (in Visual Basic).</span></span> <span data-ttu-id="8c50d-109">Дополнительные сведения см. в разделе "Использование объекта, реализующего IDisposable" в статье об интерфейсе <xref:System.IDisposable>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-109">For more information, see the "Using an Object that Implements IDisposable" section in the <xref:System.IDisposable> interface topic.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="8c50d-110">В версиях 1,0 и 1,1 .NET Framework этот класс требует, чтобы непосредственные вызывающие объекты были полностью доверенными.</span><span class="sxs-lookup"><span data-stu-id="8c50d-110">In versions 1.0 and 1.1 of the .NET Framework, this class requires immediate callers to be fully trusted.</span></span> <span data-ttu-id="8c50d-111">Начиная с версии .NET Framework 2,0 этот класс требует <xref:System.Diagnostics.PerformanceCounterPermission> для определенных действий.</span><span class="sxs-lookup"><span data-stu-id="8c50d-111">Starting with the .NET Framework version 2.0, this class requires <xref:System.Diagnostics.PerformanceCounterPermission> for specific actions.</span></span> <span data-ttu-id="8c50d-112">Настоятельно рекомендуется <xref:System.Diagnostics.PerformanceCounterPermission> не предоставлять частично доверенному коду.</span><span class="sxs-lookup"><span data-stu-id="8c50d-112">It is strongly recommended that <xref:System.Diagnostics.PerformanceCounterPermission> not be granted to semi-trusted code.</span></span>  <span data-ttu-id="8c50d-113">Возможность чтения и записи счетчиков производительности позволяет коду выполнять такие действия, как перечисление выполняющихся процессов и получение сведений о них.</span><span class="sxs-lookup"><span data-stu-id="8c50d-113">The ability to read and write performance counters allows code to perform actions such as enumerating executing processes and obtaining information about them.</span></span>  
>   
>  <span data-ttu-id="8c50d-114">Кроме того, передача объекта <xref:System.Diagnostics.PerformanceCounter> в код с меньшим доверием может привести к проблемам безопасности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-114">In addition, passing a <xref:System.Diagnostics.PerformanceCounter> object to less-trusted code can create a security issue.</span></span> <span data-ttu-id="8c50d-115">Никогда не передавайте объекты счетчиков производительности, например <xref:System.Diagnostics.PerformanceCounterCategory> или <xref:System.Diagnostics.PerformanceCounter>, в менее надежный код.</span><span class="sxs-lookup"><span data-stu-id="8c50d-115">Never pass performance counter objects, such as a <xref:System.Diagnostics.PerformanceCounterCategory> or <xref:System.Diagnostics.PerformanceCounter>, to less trusted code.</span></span>  
  
 <span data-ttu-id="8c50d-116">Чтобы считать данные из счетчика производительности, создайте экземпляр класса <xref:System.Diagnostics.PerformanceCounter>, задайте <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>и, при необходимости, свойства <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> или <xref:System.Diagnostics.PerformanceCounter.MachineName%2A>, а затем вызовите метод <xref:System.Diagnostics.PerformanceCounter.NextValue%2A>, чтобы получить показания счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-116">To read from a performance counter, create an instance of the <xref:System.Diagnostics.PerformanceCounter> class, set the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and, optionally, the <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> or <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> properties, and then call the <xref:System.Diagnostics.PerformanceCounter.NextValue%2A> method to take a performance counter reading.</span></span>  
  
 <span data-ttu-id="8c50d-117">Чтобы опубликовать данные счетчика производительности, создайте один или несколько пользовательских счетчиков с помощью метода <xref:System.Diagnostics.PerformanceCounterCategory.Create%2A?displayProperty=nameWithType>, создайте экземпляр класса <xref:System.Diagnostics.PerformanceCounter>, задайте свойства <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A> и, при необходимости <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> или <xref:System.Diagnostics.PerformanceCounter.MachineName%2A>, а затем вызовите методы <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>, <xref:System.Diagnostics.PerformanceCounter.Increment%2A>или <xref:System.Diagnostics.PerformanceCounter.Decrement%2A> или задайте свойство <xref:System.Diagnostics.PerformanceCounter.RawValue%2A>, чтобы изменить значение пользовательского счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-117">To publish performance counter data, create one or more custom counters using the <xref:System.Diagnostics.PerformanceCounterCategory.Create%2A?displayProperty=nameWithType> method, create an instance of the <xref:System.Diagnostics.PerformanceCounter> class, set the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A> and, optionally, <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> or <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> properties, and then call the <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>, <xref:System.Diagnostics.PerformanceCounter.Increment%2A>, or <xref:System.Diagnostics.PerformanceCounter.Decrement%2A> methods, or set the <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> property to change the value of your custom counter.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-118">Методы <xref:System.Diagnostics.PerformanceCounter.Increment%2A>, <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>и <xref:System.Diagnostics.PerformanceCounter.Decrement%2A> используют взаимоблокировки для обновления значения счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-118">The <xref:System.Diagnostics.PerformanceCounter.Increment%2A>, <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>, and <xref:System.Diagnostics.PerformanceCounter.Decrement%2A> methods use interlocks to update the counter value.</span></span> <span data-ttu-id="8c50d-119">Это позволяет точно синхронизировать значение счетчика в многопоточных или многопроцессных сценариях, но также приводит к снижению производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-119">This helps keep the counter value accurate in multithreaded or multiprocess scenarios, but also results in a performance penalty.</span></span> <span data-ttu-id="8c50d-120">Если точность, предоставляемая блокируемыми операциями, не нужна, можно обновить свойство <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> напрямую в 5 раз, чтобы улучшить производительность.</span><span class="sxs-lookup"><span data-stu-id="8c50d-120">If you do not need the accuracy that interlocked operations provide, you can update the <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> property directly for up to a 5 times performance improvement.</span></span>  <span data-ttu-id="8c50d-121">Однако в многопоточных сценариях некоторые обновления значения счетчика могут игнорироваться, что приводит к неточности данных.</span><span class="sxs-lookup"><span data-stu-id="8c50d-121">However, in multithreaded scenarios, some updates to the counter value might be ignored, resulting in inaccurate data.</span></span>  
  
 <span data-ttu-id="8c50d-122">Счетчик — это механизм, с помощью которого собираются данные о производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-122">The counter is the mechanism by which performance data is collected.</span></span> <span data-ttu-id="8c50d-123">В реестре хранятся имена всех счетчиков, каждый из которых связан с определенной областью функциональных возможностей системы.</span><span class="sxs-lookup"><span data-stu-id="8c50d-123">The registry stores the names of all the counters, each of which is related to a specific area of system functionality.</span></span> <span data-ttu-id="8c50d-124">К примерам относятся время занятости процессора, использование памяти или число байтов, полученных через сетевое подключение.</span><span class="sxs-lookup"><span data-stu-id="8c50d-124">Examples include a processor's busy time, memory usage, or the number of bytes received over a network connection.</span></span>  
  
 <span data-ttu-id="8c50d-125">Каждый счетчик однозначно определяется по его имени и расположению.</span><span class="sxs-lookup"><span data-stu-id="8c50d-125">Each counter is uniquely identified through its name and its location.</span></span> <span data-ttu-id="8c50d-126">Так же, как путь к файлу включает диск, каталог, один или несколько подкаталогов и имя файла, сведения о счетчике состоят из четырех элементов: компьютера, категории, экземпляра категории и имени счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-126">In the same way that a file path includes a drive, a directory, one or more subdirectories, and a file name, counter information consists of four elements: the computer, the category, the category instance, and the counter name.</span></span>  
  
 <span data-ttu-id="8c50d-127">Данные счетчика должны включать категорию или объект производительности, который счетчик измеряет данные.</span><span class="sxs-lookup"><span data-stu-id="8c50d-127">The counter information must include the category, or performance object, that the counter measures data for.</span></span> <span data-ttu-id="8c50d-128">К категориям компьютера относятся физические компоненты, такие как процессоры, диски и память.</span><span class="sxs-lookup"><span data-stu-id="8c50d-128">A computer's categories include physical components, such as processors, disks, and memory.</span></span> <span data-ttu-id="8c50d-129">Существуют также системные категории, такие как процессы и потоки.</span><span class="sxs-lookup"><span data-stu-id="8c50d-129">There are also system categories, such as processes and threads.</span></span> <span data-ttu-id="8c50d-130">Каждая категория связана с функциональным элементом на компьютере и имеет набор стандартных счетчиков, назначенных ему.</span><span class="sxs-lookup"><span data-stu-id="8c50d-130">Each category is related to a functional element within the computer and has a set of standard counters assigned to it.</span></span> <span data-ttu-id="8c50d-131">Эти объекты перечислены в раскрывающемся списке "объект производительности" диалогового окна Добавление счетчиков в системном мониторе Windows 2000, и их необходимо включить в путь к счетчику.</span><span class="sxs-lookup"><span data-stu-id="8c50d-131">These objects are listed in the Performance object drop-down list of the Add Counters dialog box within the Windows 2000 System Monitor, and you must include them in the counter path.</span></span> <span data-ttu-id="8c50d-132">Данные производительности группируются по категории, к которой он относится.</span><span class="sxs-lookup"><span data-stu-id="8c50d-132">Performance data is grouped by the category to which is it related.</span></span>  
  
 <span data-ttu-id="8c50d-133">В некоторых случаях могут существовать несколько копий одной и той же категории.</span><span class="sxs-lookup"><span data-stu-id="8c50d-133">In certain cases, several copies of the same category can exist.</span></span> <span data-ttu-id="8c50d-134">Например, несколько процессов и потоков выполняются одновременно, и некоторые компьютеры содержат более одного процессора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-134">For example, several processes and threads run simultaneously, and some computers contain more than one processor.</span></span> <span data-ttu-id="8c50d-135">Копии категорий называются экземплярами категорий, и каждому экземпляру назначается набор стандартных счетчиков.</span><span class="sxs-lookup"><span data-stu-id="8c50d-135">The category copies are called category instances, and each instance has a set of standard counters assigned to it.</span></span> <span data-ttu-id="8c50d-136">Если категория может иметь более одного экземпляра, в данные счетчика необходимо добавить спецификацию экземпляра.</span><span class="sxs-lookup"><span data-stu-id="8c50d-136">If a category can have more than one instance, an instance specification must be included in the counter information.</span></span>  
  
 <span data-ttu-id="8c50d-137">Чтобы получить данные о производительности для счетчиков, для которых требуется начальное или предыдущее значение для выполнения необходимого вычисления, вызовите метод <xref:System.Diagnostics.PerformanceCounter.NextValue%2A> дважды и используйте возвращенную информацию, как требуется приложению.</span><span class="sxs-lookup"><span data-stu-id="8c50d-137">To obtain performance data for counters that required an initial or previous value for performing the necessary calculation, call the <xref:System.Diagnostics.PerformanceCounter.NextValue%2A> method twice and use the information returned as your application requires.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-138">Категории счетчиков производительности, установленные с [!INCLUDE[dnprdnlong](~/includes/dnprdnlong-md.md)] используют отдельную общую память, каждая из категорий счетчиков производительности имеет собственную память.</span><span class="sxs-lookup"><span data-stu-id="8c50d-138">Performance counter categories installed with the [!INCLUDE[dnprdnlong](~/includes/dnprdnlong-md.md)] use separate shared memory, with each performance counter category having its own memory.</span></span> <span data-ttu-id="8c50d-139">Можно указать размер отдельной общей памяти, создав DWORD с именем Филемаппингсизе в разделе реестра HKEY_LOCAL_MACHINE \Систем\куррентконтролсет\сервицес\\*\<Category name >* \перформанце.</span><span class="sxs-lookup"><span data-stu-id="8c50d-139">You can specify the size of separate shared memory by creating a DWORD named FileMappingSize in the registry key HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\\*\<category name>* \Performance.</span></span> <span data-ttu-id="8c50d-140">Значение Филемаппингсизе устанавливается равным общему объему памяти для категории.</span><span class="sxs-lookup"><span data-stu-id="8c50d-140">The FileMappingSize value is set to the shared memory size of the category.</span></span> <span data-ttu-id="8c50d-141">Размер по умолчанию — 131072 десятичный.</span><span class="sxs-lookup"><span data-stu-id="8c50d-141">The default size is 131072 decimal.</span></span> <span data-ttu-id="8c50d-142">Если значение Филемаппингсизе отсутствует, используется значение атрибута `fileMappingSize` для элемента `performanceCounters`, указанного в файле Machine. config, что приводит к дополнительным издержкам на обработку файла конфигурации.</span><span class="sxs-lookup"><span data-stu-id="8c50d-142">If the FileMappingSize value is not present, the `fileMappingSize` attribute value for the `performanceCounters` element specified in the Machine.config file is used, causing additional overhead for configuration file processing.</span></span> <span data-ttu-id="8c50d-143">Можно повысить производительность при запуске приложения, задав размер сопоставления файлов в реестре.</span><span class="sxs-lookup"><span data-stu-id="8c50d-143">You can realize a performance improvement for application startup by setting the file mapping size in the registry.</span></span> <span data-ttu-id="8c50d-144">Дополнительные сведения о размере сопоставления файлов см. в разделе [&lt;performancecounters&gt;](~/docs/framework/configure-apps/file-schema/trace-debug/performancecounters-element.md).</span><span class="sxs-lookup"><span data-stu-id="8c50d-144">For more information about the file mapping size, see [&lt;performanceCounters&gt;](~/docs/framework/configure-apps/file-schema/trace-debug/performancecounters-element.md).</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="8c50d-145">В следующем примере кода показано использование класса <xref:System.Diagnostics.PerformanceCounter> для создания и использования типа счетчика <xref:System.Diagnostics.PerformanceCounterType.AverageCount64>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-145">The following code example demonstrates the use of the <xref:System.Diagnostics.PerformanceCounter> class to create and use an <xref:System.Diagnostics.PerformanceCounterType.AverageCount64> counter type.</span></span> <span data-ttu-id="8c50d-146">Пример создает категории, настраивает счетчики, собирает данные из счетчиков и вызывает класс <xref:System.Diagnostics.CounterSampleCalculator> для интерпретации данных счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-146">The example creates categories, sets up counters, collects data from the counters, and calls the <xref:System.Diagnostics.CounterSampleCalculator> class to interpret the performance counter data.</span></span> <span data-ttu-id="8c50d-147">Промежуточные и окончательные результаты отображаются в окне консоли.</span><span class="sxs-lookup"><span data-stu-id="8c50d-147">The intermediate and final results are displayed in the console window.</span></span> <span data-ttu-id="8c50d-148">Дополнительные примеры других типов счетчиков производительности см. в разделе Перечисление <xref:System.Diagnostics.PerformanceCounterType>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-148">For additional examples of other performance counter types, see the <xref:System.Diagnostics.PerformanceCounterType> enumeration.</span></span>  
  
 [!code-cpp[PerformanceCounterType.AverageCounter64#1](~/samples/snippets/cpp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CPP/averagecount32.cpp#1)]
 [!code-csharp[PerformanceCounterType.AverageCounter64#1](~/samples/snippets/csharp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CS/averagecount32.cs#1)]
 [!code-vb[PerformanceCounterType.AverageCounter64#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/VB/averagecount32.vb#1)]  
  
 ]]></format>
    </remarks>
    <altmember cref="T:System.Diagnostics.PerformanceCounterType" />
    <altmember cref="T:System.Diagnostics.CounterCreationData" />
    <altmember cref="T:System.Diagnostics.CounterCreationDataCollection" />
    <altmember cref="T:System.Diagnostics.CounterSample" />
    <altmember cref="T:System.Diagnostics.CounterSampleCalculator" />
  </Docs>
  <Members>
    <MemberGroup MemberName=".ctor">
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Docs>
        <permission cref="F:System.Security.Permissions.SecurityAction.LinkDemand"><span data-ttu-id="8c50d-149">Полный уровень доверия для непосредственного вызывающего.</span><span class="sxs-lookup"><span data-stu-id="8c50d-149">for full trust for the immediate caller.</span></span> <span data-ttu-id="8c50d-150">Этот класс нельзя использовать в частично доверенном коде.</span><span class="sxs-lookup"><span data-stu-id="8c50d-150">This class cannot be used by partially trusted code.</span></span></permission>
        <summary><span data-ttu-id="8c50d-151">Инициализирует новый экземпляр класса <see cref="T:System.Diagnostics.PerformanceCounter" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-151">Initializes a new instance of the <see cref="T:System.Diagnostics.PerformanceCounter" /> class.</span></span></summary>
      </Docs>
    </MemberGroup>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public PerformanceCounter ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.#ctor" />
      <MemberSignature Language="VB.NET" Value="Public Sub New ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; PerformanceCounter();" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="8c50d-152">Выполняет инициализацию нового, доступного только для чтения экземпляра класса <see cref="T:System.Diagnostics.PerformanceCounter" />, не связывая этот экземпляр с каким-нибудь системным или определенным пользователем счетчиком производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-152">Initializes a new, read-only instance of the <see cref="T:System.Diagnostics.PerformanceCounter" /> class, without associating the instance with any system or custom performance counter.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-153">Эта перегрузка конструктора устанавливает свойства <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>и <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> в пустые строки ("") и устанавливает свойство <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> на локальный компьютер (".").</span><span class="sxs-lookup"><span data-stu-id="8c50d-153">This overload of the constructor sets the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> properties to empty strings (""), and sets the <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> property to the local computer, (".").</span></span>  
  
 <span data-ttu-id="8c50d-154">Этот конструктор не инициализирует счетчик производительности, поэтому он не связывает экземпляр с существующим счетчиком на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-154">This constructor does not initialize the performance counter, so it does not associate the instance with an existing counter on the local computer.</span></span> <span data-ttu-id="8c50d-155">Чтобы указать конкретный счетчик производительности, задайте <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>и (необязательно) свойства <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> и <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> перед чтением любых других свойств или попыткой чтения из счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-155">To point to a specific performance counter, set the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and, optionally, the <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> and <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> properties before reading any other properties or attempting to read from a counter.</span></span> <span data-ttu-id="8c50d-156">Чтобы записать данные в счетчик производительности, задайте для свойства <xref:System.Diagnostics.PerformanceCounter.ReadOnly%2A> значение `false`.</span><span class="sxs-lookup"><span data-stu-id="8c50d-156">To write to a performance counter, set the <xref:System.Diagnostics.PerformanceCounter.ReadOnly%2A> property to `false`.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-157">Атрибут <xref:System.Security.Permissions.HostProtectionAttribute>, применяемый к этому элементу, имеет следующее <xref:System.Security.Permissions.HostProtectionAttribute.Resources%2A> значение свойства &#124; : <xref:System.Security.Permissions.HostProtectionResource.Synchronization> <xref:System.Security.Permissions.HostProtectionResource.SharedState>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-157">The <xref:System.Security.Permissions.HostProtectionAttribute> attribute applied to this member has the following <xref:System.Security.Permissions.HostProtectionAttribute.Resources%2A> property value: <xref:System.Security.Permissions.HostProtectionResource.Synchronization> &#124; <xref:System.Security.Permissions.HostProtectionResource.SharedState>.</span></span> <span data-ttu-id="8c50d-158">Атрибут <xref:System.Security.Permissions.HostProtectionAttribute> не оказывает влияния на настольные приложения (обычно запускаемые двойным щелчком значка, вводом команды или URL-адреса в браузере).</span><span class="sxs-lookup"><span data-stu-id="8c50d-158">The <xref:System.Security.Permissions.HostProtectionAttribute> does not affect desktop applications (which are typically started by double-clicking an icon, typing a command, or entering a URL in a browser).</span></span> <span data-ttu-id="8c50d-159">Дополнительные сведения см. в разделе <xref:System.Security.Permissions.HostProtectionAttribute> класс или [SQL Server атрибуты защиты узла](~/docs/framework/performance/sql-server-programming-and-host-protection-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="8c50d-159">For more information, see the <xref:System.Security.Permissions.HostProtectionAttribute> class or [SQL Server Programming and Host Protection Attributes](~/docs/framework/performance/sql-server-programming-and-host-protection-attributes.md).</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="8c50d-160">В следующем примере кода создается экземпляр класса <xref:System.Diagnostics.PerformanceCounter> по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="8c50d-160">The following code example creates a default instance of the <xref:System.Diagnostics.PerformanceCounter> class.</span></span> <span data-ttu-id="8c50d-161">После создания экземпляра задаются значения свойств <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>и <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>, а также отображаются результаты вызова метода <xref:System.Diagnostics.PerformanceCounter.NextValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-161">After the instance is created, the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> property values are set, and the results of a call to the <xref:System.Diagnostics.PerformanceCounter.NextValue%2A> method are displayed.</span></span>  
  
 [!code-cpp[PerfCounter#1](~/samples/snippets/cpp/VS_Snippets_CLR/PerfCounter/CPP/perfcounter.cpp#1)]
 [!code-csharp[PerfCounter#1](~/samples/snippets/csharp/VS_Snippets_CLR/PerfCounter/CS/perfcounter.cs#1)]
 [!code-vb[PerfCounter#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerfCounter/VB/perfcounter.vb#1)]  
  
 ]]></format>
        </remarks>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission"><span data-ttu-id="8c50d-162">для записи категории счетчика производительности, если свойство <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> имеет значение <see langword="false" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-162">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span></span> <span data-ttu-id="8c50d-163">Связанное перечисление: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-163">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span></span></permission>
      </Docs>
    </Member>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public PerformanceCounter (string categoryName, string counterName);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(string categoryName, string counterName) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.#ctor(System.String,System.String)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (categoryName As String, counterName As String)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; PerformanceCounter(System::String ^ categoryName, System::String ^ counterName);" />
      <MemberSignature Language="F#" Value="new System.Diagnostics.PerformanceCounter : string * string -&gt; System.Diagnostics.PerformanceCounter" Usage="new System.Diagnostics.PerformanceCounter (categoryName, counterName)" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <Parameters>
        <Parameter Name="categoryName" Type="System.String" />
        <Parameter Name="counterName" Type="System.String" />
      </Parameters>
      <Docs>
        <param name="categoryName"><span data-ttu-id="8c50d-164">Имя категории счетчика производительности (объект производительности), которому соответствует этот счетчик производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-164">The name of the performance counter category (performance object) with which this performance counter is associated.</span></span></param>
        <param name="counterName"><span data-ttu-id="8c50d-165">Имя счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-165">The name of the performance counter.</span></span></param>
        <summary><span data-ttu-id="8c50d-166">Выполняет инициализацию нового, доступного только для чтения экземпляра класса <see cref="T:System.Diagnostics.PerformanceCounter" /> и связывает этот экземпляр с конкретным системным или определенным пользователем счетчиком производительности на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-166">Initializes a new, read-only instance of the <see cref="T:System.Diagnostics.PerformanceCounter" /> class and associates it with the specified system or custom performance counter on the local computer.</span></span> <span data-ttu-id="8c50d-167">Этот конструктор требует, чтобы категория имела единственный экземпляр.</span><span class="sxs-lookup"><span data-stu-id="8c50d-167">This constructor requires that the category have a single instance.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-168">В строках параметров регистр не учитывается.</span><span class="sxs-lookup"><span data-stu-id="8c50d-168">The parameter strings are not case-sensitive.</span></span>  
  
 <span data-ttu-id="8c50d-169">Используйте эту перегрузку для доступа к счетчику на локальном компьютере, который принадлежит к категории, содержащей один экземпляр категории счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-169">Use this overload to access a counter on the local computer that belongs to a category containing a single performance counter category instance.</span></span> <span data-ttu-id="8c50d-170">При попытке использовать этот конструктор для указания <xref:System.Diagnostics.PerformanceCounter> экземпляра на категорию, содержащую несколько экземпляров, конструктор выдает исключение.</span><span class="sxs-lookup"><span data-stu-id="8c50d-170">If you attempt to use this constructor to point this <xref:System.Diagnostics.PerformanceCounter> instance to a category that contains multiple instances, the constructor throws an exception.</span></span> <span data-ttu-id="8c50d-171">Эта перегрузка может обращаться к любому счетчику только для чтения или чтения и записи, но делает это в режиме только для чтения.</span><span class="sxs-lookup"><span data-stu-id="8c50d-171">This overload can access any read-only or read/write counter, but does so in a read-only mode.</span></span> <span data-ttu-id="8c50d-172">Экземпляр <xref:System.Diagnostics.PerformanceCounter>, созданный с помощью этой перегрузки, не может записывать в счетчик, даже если сам счетчик доступен для чтения и записи.</span><span class="sxs-lookup"><span data-stu-id="8c50d-172">A <xref:System.Diagnostics.PerformanceCounter> instance created using this overload cannot write to the counter, even if the counter itself is read/write.</span></span>  
  
 <span data-ttu-id="8c50d-173">Эта перегрузка конструктора задает для свойств <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A> и <xref:System.Diagnostics.PerformanceCounter.CounterName%2A> значения, которые вы передали, устанавливает свойство <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> на локальный компьютер, "." и устанавливает для свойства <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> пустую строку ("").</span><span class="sxs-lookup"><span data-stu-id="8c50d-173">This overload of the constructor sets the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A> and <xref:System.Diagnostics.PerformanceCounter.CounterName%2A> properties to the values you pass in, sets the <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> property to the local computer, ".", and sets the <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> property to an empty string ("").</span></span>  
  
 <span data-ttu-id="8c50d-174">Этот конструктор инициализирует счетчик производительности и связывает экземпляр с существующим счетчиком (системой или пользовательским счетчиком) на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-174">This constructor initializes the performance counter and associates the instance with an existing counter (either a system or a custom counter) on the local computer.</span></span> <span data-ttu-id="8c50d-175">Значения, передаваемые для свойств <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A> и <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, должны указывать на существующий счетчик производительности на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-175">The values that you pass in for the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A> and <xref:System.Diagnostics.PerformanceCounter.CounterName%2A> properties must point to an existing performance counter on the local computer.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-176">Для чтения счетчиков производительности в Windows Vista, Windows XP Professional x64 Edition или Windows Server 2003 необходимо быть членом группы "Пользователи системного монитора" или обладать правами администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-176">To read performance counters in Windows Vista, Windows XP Professional x64 Edition, or Windows Server 2003, you must either be a member of the Performance Monitor Users group or have administrative privileges.</span></span>  
>   
>  <span data-ttu-id="8c50d-177">Чтобы не допустить повышения привилегий для доступа к счетчикам производительности в Windows Vista, добавьте себя в группу Пользователи системного монитора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-177">To avoid having to elevate your privileges to access performance counters in Windows Vista, add yourself to the Performance Monitor Users group.</span></span>  
>   
>  <span data-ttu-id="8c50d-178">В Windows Vista привилегии пользователя определяются контролем учетных записей (UAC).</span><span class="sxs-lookup"><span data-stu-id="8c50d-178">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="8c50d-179">Члену встроенной группы "Администраторы" присваивается два маркера доступа на время выполнения: маркер доступа обычного пользователя и маркер доступа администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-179">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="8c50d-180">По умолчанию назначена роль обычного пользователя.</span><span class="sxs-lookup"><span data-stu-id="8c50d-180">By default, you are in the standard user role.</span></span> <span data-ttu-id="8c50d-181">Чтобы выполнить код, обращающийся к счетчикам производительности, необходимо сначала повысить привилегии обычного пользователя до администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-181">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="8c50d-182">Это можно сделать при запуске приложения, , щелкнув значок приложения правой кнопкой мыши и указав, что приложение должно запускаться от имени администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-182">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException"><span data-ttu-id="8c50d-183">Параметр <paramref name="categoryName" /> является пустой строкой ("").</span><span class="sxs-lookup"><span data-stu-id="8c50d-183"><paramref name="categoryName" /> is an empty string ("").</span></span>  
  
<span data-ttu-id="8c50d-184">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-184">-or-</span></span> 
 <span data-ttu-id="8c50d-185">Параметр <paramref name="counterName" /> является пустой строкой ("").</span><span class="sxs-lookup"><span data-stu-id="8c50d-185"><paramref name="counterName" /> is an empty string ("").</span></span>  
  
<span data-ttu-id="8c50d-186">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-186">-or-</span></span> 
<span data-ttu-id="8c50d-187">Указанная категория не существует.</span><span class="sxs-lookup"><span data-stu-id="8c50d-187">The category specified does not exist.</span></span>  
  
<span data-ttu-id="8c50d-188">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-188">-or-</span></span> 
<span data-ttu-id="8c50d-189">Указанная категория отмечается как многоэкземплярная и требует создания счетчика производительности с именем экземпляра.</span><span class="sxs-lookup"><span data-stu-id="8c50d-189">The category specified is marked as multi-instance and requires the performance counter to be created with an instance name.</span></span>  
  
<span data-ttu-id="8c50d-190">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-190">-or-</span></span> 
 <span data-ttu-id="8c50d-191">Параметры <paramref name="categoryName" /> и <paramref name="counterName" /> были локализованы на разных языках.</span><span class="sxs-lookup"><span data-stu-id="8c50d-191"><paramref name="categoryName" /> and <paramref name="counterName" /> have been localized into different languages.</span></span></exception>
        <exception cref="T:System.ArgumentNullException"><span data-ttu-id="8c50d-192">Значение параметра <paramref name="categoryName" /> или <paramref name="counterName" /> — <see langword="null" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-192"><paramref name="categoryName" /> or <paramref name="counterName" /> is <see langword="null" />.</span></span></exception>
        <exception cref="T:System.ComponentModel.Win32Exception"><span data-ttu-id="8c50d-193">Произошла ошибка при обращении к API-интерфейсу системы.</span><span class="sxs-lookup"><span data-stu-id="8c50d-193">An error occurred when accessing a system API.</span></span></exception>
        <exception cref="T:System.UnauthorizedAccessException"><span data-ttu-id="8c50d-194">Код, выполняющийся без привилегий администратора, предпринял попытку считывания значения счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-194">Code that is executing without administrative privileges attempted to read a performance counter.</span></span></exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission"><span data-ttu-id="8c50d-195">для записи категории счетчика производительности, если свойство <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> имеет значение <see langword="false" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-195">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span></span> <span data-ttu-id="8c50d-196">Связанное перечисление: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-196">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span></span></permission>
      </Docs>
    </Member>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public PerformanceCounter (string categoryName, string counterName, bool readOnly);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(string categoryName, string counterName, bool readOnly) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.#ctor(System.String,System.String,System.Boolean)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (categoryName As String, counterName As String, readOnly As Boolean)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; PerformanceCounter(System::String ^ categoryName, System::String ^ counterName, bool readOnly);" />
      <MemberSignature Language="F#" Value="new System.Diagnostics.PerformanceCounter : string * string * bool -&gt; System.Diagnostics.PerformanceCounter" Usage="new System.Diagnostics.PerformanceCounter (categoryName, counterName, readOnly)" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <Parameters>
        <Parameter Name="categoryName" Type="System.String" />
        <Parameter Name="counterName" Type="System.String" />
        <Parameter Name="readOnly" Type="System.Boolean" />
      </Parameters>
      <Docs>
        <param name="categoryName"><span data-ttu-id="8c50d-197">Имя категории счетчика производительности (объект производительности), которому соответствует этот счетчик производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-197">The name of the performance counter category (performance object) with which this performance counter is associated.</span></span></param>
        <param name="counterName"><span data-ttu-id="8c50d-198">Имя счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-198">The name of the performance counter.</span></span></param>
        <param name="readOnly"><span data-ttu-id="8c50d-199">Значение <see langword="true" /> для доступа к счетчику в режиме только для чтения (хотя сам счетчик может быть для чтения/записи); значение <see langword="false" /> для доступа к счетчику в режиме чтения/записи.</span><span class="sxs-lookup"><span data-stu-id="8c50d-199"><see langword="true" /> to access the counter in read-only mode (although the counter itself could be read/write); <see langword="false" /> to access the counter in read/write mode.</span></span></param>
        <summary><span data-ttu-id="8c50d-200">Выполняет инициализацию нового, доступного только для чтения или для чтения и записи экземпляра класса <see cref="T:System.Diagnostics.PerformanceCounter" /> и связывает этот экземпляр с конкретным системным или определенным пользователем счетчиком производительности на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-200">Initializes a new, read-only or read/write instance of the <see cref="T:System.Diagnostics.PerformanceCounter" /> class and associates it with the specified system or custom performance counter on the local computer.</span></span> <span data-ttu-id="8c50d-201">Этот конструктор требует, чтобы категория содержала единственный экземпляр.</span><span class="sxs-lookup"><span data-stu-id="8c50d-201">This constructor requires that the category contain a single instance.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-202">В строках параметров регистр не учитывается.</span><span class="sxs-lookup"><span data-stu-id="8c50d-202">The parameter strings are not case-sensitive.</span></span>  
  
 <span data-ttu-id="8c50d-203">Используйте эту перегрузку для доступа к счетчику только для чтения или чтения и записи на локальном компьютере, который принадлежит к категории, содержащей один экземпляр категории счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-203">Use this overload to access a read-only or read/write counter on the local computer that belongs to a category containing a single performance counter category instance.</span></span> <span data-ttu-id="8c50d-204">При попытке использовать этот конструктор для указания <xref:System.Diagnostics.PerformanceCounter> экземпляра на категорию, содержащую несколько экземпляров, конструктор выдает исключение.</span><span class="sxs-lookup"><span data-stu-id="8c50d-204">If you attempt to use this constructor to point this <xref:System.Diagnostics.PerformanceCounter> instance to a category that contains multiple instances, the constructor throws an exception.</span></span>  
  
 <span data-ttu-id="8c50d-205">Эта перегрузка конструктора задает для свойств <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>и <xref:System.Diagnostics.PerformanceCounter.ReadOnly%2A> значения, которые вы передали, устанавливает свойство <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> на локальный компьютер, "." и задает для свойства <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> пустую строку ("").</span><span class="sxs-lookup"><span data-stu-id="8c50d-205">This overload of the constructor sets the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and <xref:System.Diagnostics.PerformanceCounter.ReadOnly%2A> properties to the values you pass in, sets the <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> property to the local computer, ".", and sets the <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> property to an empty string ("").</span></span>  
  
 <span data-ttu-id="8c50d-206">Этот конструктор инициализирует счетчик производительности и связывает экземпляр с существующим счетчиком (системой или пользовательским счетчиком) на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-206">This constructor initializes the performance counter and associates the instance with an existing counter (either a system or a custom counter) on the local computer.</span></span> <span data-ttu-id="8c50d-207">Значения, передаваемые для свойств <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A> и <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, должны указывать на существующий счетчик производительности на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-207">The values that you pass in for the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A> and <xref:System.Diagnostics.PerformanceCounter.CounterName%2A> properties must point to an existing performance counter on the local computer.</span></span> <span data-ttu-id="8c50d-208">Если экземпляр счетчика производительности, на который указывает, является недопустимым, вызов конструктора выдаст исключение.</span><span class="sxs-lookup"><span data-stu-id="8c50d-208">If the performance counter instance that you point to is not valid, calling the constructor throws an exception.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-209">Эту перегрузку можно использовать для подключения к системному счетчику, но нельзя записывать в системный счетчик.</span><span class="sxs-lookup"><span data-stu-id="8c50d-209">You can use this overload to connect to a system counter, but you cannot write to a system counter.</span></span> <span data-ttu-id="8c50d-210">Поэтому при установке значения `readOnly` `false` при подключении к системному счетчику конструктор создает исключение.</span><span class="sxs-lookup"><span data-stu-id="8c50d-210">Therefore, setting `readOnly` to `false` when connecting to a system counter causes the constructor to throw an exception.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-211">Для чтения счетчиков производительности в Windows Vista, Windows XP Professional x64 Edition или Windows Server 2003 необходимо быть членом группы "Пользователи системного монитора" или обладать правами администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-211">To read performance counters in Windows Vista, Windows XP Professional x64 Edition, or Windows Server 2003, you must either be a member of the Performance Monitor Users group or have administrative privileges.</span></span>  
>   
>  <span data-ttu-id="8c50d-212">Чтобы не допустить повышения привилегий для доступа к счетчикам производительности в Windows Vista, добавьте себя в группу Пользователи системного монитора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-212">To avoid having to elevate your privileges to access performance counters in Windows Vista, add yourself to the Performance Monitor Users group.</span></span>  
>   
>  <span data-ttu-id="8c50d-213">В Windows Vista привилегии пользователя определяются контролем учетных записей (UAC).</span><span class="sxs-lookup"><span data-stu-id="8c50d-213">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="8c50d-214">Члену встроенной группы "Администраторы" присваивается два маркера доступа на время выполнения: маркер доступа обычного пользователя и маркер доступа администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-214">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="8c50d-215">По умолчанию назначена роль обычного пользователя.</span><span class="sxs-lookup"><span data-stu-id="8c50d-215">By default, you are in the standard user role.</span></span> <span data-ttu-id="8c50d-216">Чтобы выполнить код, обращающийся к счетчикам производительности, необходимо сначала повысить привилегии обычного пользователя до администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-216">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="8c50d-217">Это можно сделать при запуске приложения, , щелкнув значок приложения правой кнопкой мыши и указав, что приложение должно запускаться от имени администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-217">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="8c50d-218">В следующем примере кода создается экземпляр класса <xref:System.Diagnostics.PerformanceCounter>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-218">The following code example creates an instance of the <xref:System.Diagnostics.PerformanceCounter> class.</span></span> <span data-ttu-id="8c50d-219">В примере передаются имена категорий, имена счетчиков и значение флага, указывающее, что счетчик не доступен только для чтения.</span><span class="sxs-lookup"><span data-stu-id="8c50d-219">The example passes in category names, counter names, and a flag value indicating that the counter is not read-only.</span></span> <span data-ttu-id="8c50d-220">Этот пример кода является частью более крупного примера для класса <xref:System.Diagnostics.PerformanceCounter>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-220">This code example is part of a larger example for the <xref:System.Diagnostics.PerformanceCounter> class.</span></span>  
  
 [!code-cpp[PerformanceCounterType.AverageCounter64#2](~/samples/snippets/cpp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CPP/averagecount32.cpp#2)]
 [!code-csharp[PerformanceCounterType.AverageCounter64#2](~/samples/snippets/csharp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CS/averagecount32.cs#2)]
 [!code-vb[PerformanceCounterType.AverageCounter64#2](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/VB/averagecount32.vb#2)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException"><span data-ttu-id="8c50d-221">Значением параметра <paramref name="categoryName" /> является пустая строка ("").</span><span class="sxs-lookup"><span data-stu-id="8c50d-221">The <paramref name="categoryName" /> is an empty string ("").</span></span>  
  
<span data-ttu-id="8c50d-222">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-222">-or-</span></span> 
<span data-ttu-id="8c50d-223">Значением параметра <paramref name="counterName" /> является пустая строка ("").</span><span class="sxs-lookup"><span data-stu-id="8c50d-223">The <paramref name="counterName" /> is an empty string ("").</span></span>  
  
<span data-ttu-id="8c50d-224">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-224">-or-</span></span> 
<span data-ttu-id="8c50d-225">Указанная категория не существует.</span><span class="sxs-lookup"><span data-stu-id="8c50d-225">The category specified does not exist.</span></span> <span data-ttu-id="8c50d-226">(если <paramref name="readOnly" /> равен <see langword="true" />).</span><span class="sxs-lookup"><span data-stu-id="8c50d-226">(if <paramref name="readOnly" /> is <see langword="true" />).</span></span>  
  
<span data-ttu-id="8c50d-227">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-227">-or-</span></span> 
<span data-ttu-id="8c50d-228">Заданная категория не является определенной пользователем .NET Framework категорией (если <paramref name="readOnly" /> равен <see langword="false" />).</span><span class="sxs-lookup"><span data-stu-id="8c50d-228">The category specified is not a .NET Framework custom category (if <paramref name="readOnly" /> is <see langword="false" />).</span></span>  
  
<span data-ttu-id="8c50d-229">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-229">-or-</span></span> 
<span data-ttu-id="8c50d-230">Указанная категория отмечается как многоэкземплярная и требует создания счетчика производительности с именем экземпляра.</span><span class="sxs-lookup"><span data-stu-id="8c50d-230">The category specified is marked as multi-instance and requires the performance counter to be created with an instance name.</span></span>  
  
<span data-ttu-id="8c50d-231">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-231">-or-</span></span> 
 <span data-ttu-id="8c50d-232">Параметры <paramref name="categoryName" /> и <paramref name="counterName" /> были локализованы на разных языках.</span><span class="sxs-lookup"><span data-stu-id="8c50d-232"><paramref name="categoryName" /> and <paramref name="counterName" /> have been localized into different languages.</span></span></exception>
        <exception cref="T:System.ArgumentNullException"><span data-ttu-id="8c50d-233">Значение параметра <paramref name="categoryName" /> или <paramref name="counterName" /> — <see langword="null" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-233"><paramref name="categoryName" /> or <paramref name="counterName" /> is <see langword="null" />.</span></span></exception>
        <exception cref="T:System.ComponentModel.Win32Exception"><span data-ttu-id="8c50d-234">Произошла ошибка при обращении к API-интерфейсу системы.</span><span class="sxs-lookup"><span data-stu-id="8c50d-234">An error occurred when accessing a system API.</span></span></exception>
        <exception cref="T:System.UnauthorizedAccessException"><span data-ttu-id="8c50d-235">Код, выполняющийся без привилегий администратора, предпринял попытку считывания значения счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-235">Code that is executing without administrative privileges attempted to read a performance counter.</span></span></exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission"><span data-ttu-id="8c50d-236">для записи категории счетчика производительности, если свойство <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> имеет значение <see langword="false" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-236">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span></span> <span data-ttu-id="8c50d-237">Связанное перечисление: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-237">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span></span></permission>
      </Docs>
    </Member>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public PerformanceCounter (string categoryName, string counterName, string instanceName);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(string categoryName, string counterName, string instanceName) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.#ctor(System.String,System.String,System.String)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (categoryName As String, counterName As String, instanceName As String)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; PerformanceCounter(System::String ^ categoryName, System::String ^ counterName, System::String ^ instanceName);" />
      <MemberSignature Language="F#" Value="new System.Diagnostics.PerformanceCounter : string * string * string -&gt; System.Diagnostics.PerformanceCounter" Usage="new System.Diagnostics.PerformanceCounter (categoryName, counterName, instanceName)" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <Parameters>
        <Parameter Name="categoryName" Type="System.String" />
        <Parameter Name="counterName" Type="System.String" />
        <Parameter Name="instanceName" Type="System.String" />
      </Parameters>
      <Docs>
        <param name="categoryName"><span data-ttu-id="8c50d-238">Имя категории счетчика производительности (объект производительности), которому соответствует этот счетчик производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-238">The name of the performance counter category (performance object) with which this performance counter is associated.</span></span></param>
        <param name="counterName"><span data-ttu-id="8c50d-239">Имя счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-239">The name of the performance counter.</span></span></param>
        <param name="instanceName"><span data-ttu-id="8c50d-240">Имя экземпляра категории счетчика производительности или пустая строка (""), если категория содержит единственный экземпляр.</span><span class="sxs-lookup"><span data-stu-id="8c50d-240">The name of the performance counter category instance, or an empty string (""), if the category contains a single instance.</span></span></param>
        <summary><span data-ttu-id="8c50d-241">Выполняет инициализацию нового, доступного только для чтения экземпляра класса <see cref="T:System.Diagnostics.PerformanceCounter" /> и связывает этот экземпляр с конкретным системным или определенным пользователем счетчиком производительности и экземпляром категории на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-241">Initializes a new, read-only instance of the <see cref="T:System.Diagnostics.PerformanceCounter" /> class and associates it with the specified system or custom performance counter and category instance on the local computer.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-242">В строках параметров регистр не учитывается.</span><span class="sxs-lookup"><span data-stu-id="8c50d-242">The parameter strings are not case-sensitive.</span></span>  
  
 <span data-ttu-id="8c50d-243">Эта перегрузка конструктора задает для свойств <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>и <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> значения, которые вы передали, и задает для свойства <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> локальный компьютер ".".</span><span class="sxs-lookup"><span data-stu-id="8c50d-243">This overload of the constructor sets the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> properties to the values you pass in, and sets the <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> property to the local computer, ".".</span></span>  
  
 <span data-ttu-id="8c50d-244">Этот конструктор инициализирует счетчик производительности и связывает экземпляр с существующим счетчиком (системой или пользовательским счетчиком) на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-244">This constructor initializes the performance counter and associates the instance with an existing counter (either a system or a custom counter) on the local computer.</span></span> <span data-ttu-id="8c50d-245">Значения, передаваемые для свойств <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>и <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>, должны указывать на существующий счетчик производительности на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-245">The values that you pass in for the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> properties must point to an existing performance counter on the local computer.</span></span> <span data-ttu-id="8c50d-246">Если экземпляр счетчика производительности, на который указывает, является недопустимым, вызов конструктора выдаст исключение.</span><span class="sxs-lookup"><span data-stu-id="8c50d-246">If the performance counter instance you point to is not valid, calling the constructor throws an exception.</span></span>  
  
 <span data-ttu-id="8c50d-247">Эта перегрузка может обращаться к любому счетчику только для чтения или чтения и записи, но делает это в режиме только для чтения.</span><span class="sxs-lookup"><span data-stu-id="8c50d-247">This overload can access any read-only or read/write counter, but does so in a read-only mode.</span></span> <span data-ttu-id="8c50d-248">Экземпляр <xref:System.Diagnostics.PerformanceCounter>, созданный с помощью этой перегрузки, не может записывать в счетчик, даже если сам счетчик доступен для чтения и записи.</span><span class="sxs-lookup"><span data-stu-id="8c50d-248">A <xref:System.Diagnostics.PerformanceCounter> instance created using this overload cannot write to the counter, even if the counter itself is read/write.</span></span>  
  
 <span data-ttu-id="8c50d-249">Чтобы создать экземпляр категории производительности, укажите `instanceName` в конструкторе <xref:System.Diagnostics.PerformanceCounter.%23ctor%2A>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-249">To create a performance category instance, specify an `instanceName` on the <xref:System.Diagnostics.PerformanceCounter.%23ctor%2A> constructor.</span></span> <span data-ttu-id="8c50d-250">Если экземпляр категории, заданный с помощью `instanceName`, уже существует, новый объект будет ссылаться на существующий экземпляр категории.</span><span class="sxs-lookup"><span data-stu-id="8c50d-250">If the category instance specified by `instanceName` already exists the new object will reference the existing category instance.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-251">Для чтения счетчиков производительности в Windows Vista, Windows XP Professional x64 Edition или Windows Server 2003 необходимо быть членом группы "Пользователи системного монитора" или обладать правами администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-251">To read performance counters in Windows Vista, Windows XP Professional x64 Edition, or Windows Server 2003, you must either be a member of the Performance Monitor Users group or have administrative privileges.</span></span>  
>   
>  <span data-ttu-id="8c50d-252">Чтобы не допустить повышения привилегий для доступа к счетчикам производительности в Windows Vista, добавьте себя в группу Пользователи системного монитора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-252">To avoid having to elevate your privileges to access performance counters in Windows Vista, add yourself to the Performance Monitor Users group.</span></span>  
>   
>  <span data-ttu-id="8c50d-253">В Windows Vista привилегии пользователя определяются контролем учетных записей (UAC).</span><span class="sxs-lookup"><span data-stu-id="8c50d-253">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="8c50d-254">Члену встроенной группы "Администраторы" присваивается два маркера доступа на время выполнения: маркер доступа обычного пользователя и маркер доступа администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-254">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="8c50d-255">По умолчанию назначена роль обычного пользователя.</span><span class="sxs-lookup"><span data-stu-id="8c50d-255">By default, you are in the standard user role.</span></span> <span data-ttu-id="8c50d-256">Чтобы выполнить код, обращающийся к счетчикам производительности, необходимо сначала повысить привилегии обычного пользователя до администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-256">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="8c50d-257">Это можно сделать при запуске приложения, , щелкнув значок приложения правой кнопкой мыши и указав, что приложение должно запускаться от имени администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-257">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException"><span data-ttu-id="8c50d-258">Параметр <paramref name="categoryName" /> является пустой строкой ("").</span><span class="sxs-lookup"><span data-stu-id="8c50d-258"><paramref name="categoryName" /> is an empty string ("").</span></span>  
  
<span data-ttu-id="8c50d-259">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-259">-or-</span></span> 
 <span data-ttu-id="8c50d-260">Параметр <paramref name="counterName" /> является пустой строкой ("").</span><span class="sxs-lookup"><span data-stu-id="8c50d-260"><paramref name="counterName" /> is an empty string ("").</span></span>  
  
<span data-ttu-id="8c50d-261">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-261">-or-</span></span> 
<span data-ttu-id="8c50d-262">Задана недопустимая категория.</span><span class="sxs-lookup"><span data-stu-id="8c50d-262">The category specified is not valid.</span></span>  
  
<span data-ttu-id="8c50d-263">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-263">-or-</span></span> 
<span data-ttu-id="8c50d-264">Указанная категория отмечается как многоэкземплярная и требует создания счетчика производительности с именем экземпляра.</span><span class="sxs-lookup"><span data-stu-id="8c50d-264">The category specified is marked as multi-instance and requires the performance counter to be created with an instance name.</span></span>  
  
<span data-ttu-id="8c50d-265">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-265">-or-</span></span> 
 <span data-ttu-id="8c50d-266">Длина параметра <paramref name="instanceName" /> превышает 127 символов.</span><span class="sxs-lookup"><span data-stu-id="8c50d-266"><paramref name="instanceName" /> is longer than 127 characters.</span></span>  
  
<span data-ttu-id="8c50d-267">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-267">-or-</span></span> 
 <span data-ttu-id="8c50d-268">Параметры <paramref name="categoryName" /> и <paramref name="counterName" /> были локализованы на разных языках.</span><span class="sxs-lookup"><span data-stu-id="8c50d-268"><paramref name="categoryName" /> and <paramref name="counterName" /> have been localized into different languages.</span></span></exception>
        <exception cref="T:System.ArgumentNullException"><span data-ttu-id="8c50d-269">Значение параметра <paramref name="categoryName" /> или <paramref name="counterName" /> — <see langword="null" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-269"><paramref name="categoryName" /> or <paramref name="counterName" /> is <see langword="null" />.</span></span></exception>
        <exception cref="T:System.ComponentModel.Win32Exception"><span data-ttu-id="8c50d-270">Произошла ошибка при обращении к API-интерфейсу системы.</span><span class="sxs-lookup"><span data-stu-id="8c50d-270">An error occurred when accessing a system API.</span></span></exception>
        <exception cref="T:System.UnauthorizedAccessException"><span data-ttu-id="8c50d-271">Код, выполняющийся без привилегий администратора, предпринял попытку считывания значения счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-271">Code that is executing without administrative privileges attempted to read a performance counter.</span></span></exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission"><span data-ttu-id="8c50d-272">для записи категории счетчика производительности, если свойство <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> имеет значение <see langword="false" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-272">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span></span> <span data-ttu-id="8c50d-273">Связанное перечисление: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-273">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span></span></permission>
      </Docs>
    </Member>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public PerformanceCounter (string categoryName, string counterName, string instanceName, bool readOnly);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(string categoryName, string counterName, string instanceName, bool readOnly) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.#ctor(System.String,System.String,System.String,System.Boolean)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (categoryName As String, counterName As String, instanceName As String, readOnly As Boolean)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; PerformanceCounter(System::String ^ categoryName, System::String ^ counterName, System::String ^ instanceName, bool readOnly);" />
      <MemberSignature Language="F#" Value="new System.Diagnostics.PerformanceCounter : string * string * string * bool -&gt; System.Diagnostics.PerformanceCounter" Usage="new System.Diagnostics.PerformanceCounter (categoryName, counterName, instanceName, readOnly)" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters>
        <Parameter Name="categoryName" Type="System.String" />
        <Parameter Name="counterName" Type="System.String" />
        <Parameter Name="instanceName" Type="System.String" />
        <Parameter Name="readOnly" Type="System.Boolean" />
      </Parameters>
      <Docs>
        <param name="categoryName"><span data-ttu-id="8c50d-274">Имя категории счетчика производительности (объект производительности), которому соответствует этот счетчик производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-274">The name of the performance counter category (performance object) with which this performance counter is associated.</span></span></param>
        <param name="counterName"><span data-ttu-id="8c50d-275">Имя счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-275">The name of the performance counter.</span></span></param>
        <param name="instanceName"><span data-ttu-id="8c50d-276">Имя экземпляра категории счетчика производительности или пустая строка (""), если категория содержит единственный экземпляр.</span><span class="sxs-lookup"><span data-stu-id="8c50d-276">The name of the performance counter category instance, or an empty string (""), if the category contains a single instance.</span></span></param>
        <param name="readOnly"><span data-ttu-id="8c50d-277">Значение <see langword="true" /> для доступа к счетчику в режиме только для чтения; значение <see langword="false" /> для доступа к счетчику в режиме чтения/записи.</span><span class="sxs-lookup"><span data-stu-id="8c50d-277"><see langword="true" /> to access a counter in read-only mode; <see langword="false" /> to access a counter in read/write mode.</span></span></param>
        <summary><span data-ttu-id="8c50d-278">Выполняет инициализацию нового, доступного только для чтения или для чтения и записи экземпляра класса <see cref="T:System.Diagnostics.PerformanceCounter" /> и связывает этот экземпляр с конкретным системным или определенным пользователем счетчиком производительности и экземпляром категории на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-278">Initializes a new, read-only or read/write instance of the <see cref="T:System.Diagnostics.PerformanceCounter" /> class and associates it with the specified system or custom performance counter and category instance on the local computer.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-279">В строках параметров регистр не учитывается.</span><span class="sxs-lookup"><span data-stu-id="8c50d-279">The parameter strings are not case-sensitive.</span></span>  
  
 <span data-ttu-id="8c50d-280">Используйте эту перегрузку для доступа к счетчику производительности в режиме только для чтения или чтения и записи.</span><span class="sxs-lookup"><span data-stu-id="8c50d-280">Use this overload to access a performance counter in either read-only or read/write mode.</span></span>  
  
 <span data-ttu-id="8c50d-281">Эта перегрузка конструктора задает для свойств <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>и <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> значения, которые вы передали, и задает для свойства <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> локальный компьютер ".".</span><span class="sxs-lookup"><span data-stu-id="8c50d-281">This overload of the constructor sets the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> properties to the values you pass in, it and sets the <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> property to the local computer, ".".</span></span>  
  
 <span data-ttu-id="8c50d-282">Этот конструктор инициализирует счетчик производительности и связывает экземпляр с существующим счетчиком (системой или пользовательским счетчиком) на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-282">This constructor initializes the performance counter and associates the instance with an existing counter (either a system or a custom counter) on the local computer.</span></span> <span data-ttu-id="8c50d-283">Значения, передаваемые для свойств <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>и <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>, должны указывать на существующий счетчик производительности на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-283">The values that you pass in for the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> properties must point to an existing performance counter on the local computer.</span></span> <span data-ttu-id="8c50d-284">Если экземпляр счетчика производительности, на который указывает, является недопустимым, вызов конструктора выдаст исключение.</span><span class="sxs-lookup"><span data-stu-id="8c50d-284">If the performance counter instance that you point to is not valid, calling the constructor throws an exception.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-285">Эту перегрузку можно использовать для подключения к системному счетчику, но нельзя записывать в системный счетчик.</span><span class="sxs-lookup"><span data-stu-id="8c50d-285">You can use this overload to connect to a system counter, but you cannot write to a system counter.</span></span> <span data-ttu-id="8c50d-286">Поэтому при установке значения `readOnly` `false` при подключении к системному счетчику конструктор создает исключение.</span><span class="sxs-lookup"><span data-stu-id="8c50d-286">Therefore, setting `readOnly` to `false` when connecting to a system counter causes the constructor to throw an exception.</span></span>  
  
 <span data-ttu-id="8c50d-287">Чтобы создать экземпляр категории производительности, укажите `instanceName` в конструкторе <xref:System.Diagnostics.PerformanceCounter.%23ctor%2A>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-287">To create a performance category instance, specify an `instanceName` on the <xref:System.Diagnostics.PerformanceCounter.%23ctor%2A> constructor.</span></span> <span data-ttu-id="8c50d-288">Если экземпляр категории, заданный с помощью `instanceName`, уже существует, новый объект будет ссылаться на существующий экземпляр категории.</span><span class="sxs-lookup"><span data-stu-id="8c50d-288">If the category instance specified by `instanceName` already exists the new object will reference the existing category instance.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-289">Для чтения счетчиков производительности в Windows Vista, Windows XP Professional x64 Edition или Windows Server 2003 необходимо быть членом группы "Пользователи системного монитора" или обладать правами администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-289">To read performance counters in Windows Vista, Windows XP Professional x64 Edition, or Windows Server 2003, you must either be a member of the Performance Monitor Users group or have administrative privileges.</span></span>  
>   
>  <span data-ttu-id="8c50d-290">Чтобы не допустить повышения привилегий для доступа к счетчикам производительности в Windows Vista, добавьте себя в группу Пользователи системного монитора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-290">To avoid having to elevate your privileges to access performance counters in Windows Vista, add yourself to the Performance Monitor Users group.</span></span>  
>   
>  <span data-ttu-id="8c50d-291">В Windows Vista привилегии пользователя определяются контролем учетных записей (UAC).</span><span class="sxs-lookup"><span data-stu-id="8c50d-291">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="8c50d-292">Члену встроенной группы "Администраторы" присваивается два маркера доступа на время выполнения: маркер доступа обычного пользователя и маркер доступа администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-292">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="8c50d-293">По умолчанию назначена роль обычного пользователя.</span><span class="sxs-lookup"><span data-stu-id="8c50d-293">By default, you are in the standard user role.</span></span> <span data-ttu-id="8c50d-294">Чтобы выполнить код, обращающийся к счетчикам производительности, необходимо сначала повысить привилегии обычного пользователя до администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-294">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="8c50d-295">Это можно сделать при запуске приложения, , щелкнув значок приложения правой кнопкой мыши и указав, что приложение должно запускаться от имени администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-295">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException"><span data-ttu-id="8c50d-296">Параметр <paramref name="categoryName" /> является пустой строкой ("").</span><span class="sxs-lookup"><span data-stu-id="8c50d-296"><paramref name="categoryName" /> is an empty string ("").</span></span>  
  
<span data-ttu-id="8c50d-297">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-297">-or-</span></span> 
 <span data-ttu-id="8c50d-298">Параметр <paramref name="counterName" /> является пустой строкой ("").</span><span class="sxs-lookup"><span data-stu-id="8c50d-298"><paramref name="counterName" /> is an empty string ("").</span></span>  
  
<span data-ttu-id="8c50d-299">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-299">-or-</span></span> 
<span data-ttu-id="8c50d-300">Запрошенные параметры настройки разрешения на чтение/запись являются недопустимыми для этого счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-300">The read/write permission setting requested is invalid for this counter.</span></span>  
  
<span data-ttu-id="8c50d-301">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-301">-or-</span></span> 
<span data-ttu-id="8c50d-302">Указанная категория не существует (если <paramref name="readOnly" /> равен <see langword="true" />).</span><span class="sxs-lookup"><span data-stu-id="8c50d-302">The category specified does not exist (if <paramref name="readOnly" /> is <see langword="true" />).</span></span>  
  
<span data-ttu-id="8c50d-303">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-303">-or-</span></span> 
<span data-ttu-id="8c50d-304">Заданная категория не является определенной пользователем .NET Framework категорией (если <paramref name="readOnly" /> равен <see langword="false" />).</span><span class="sxs-lookup"><span data-stu-id="8c50d-304">The category specified is not a .NET Framework custom category (if <paramref name="readOnly" /> is <see langword="false" />).</span></span>  
  
<span data-ttu-id="8c50d-305">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-305">-or-</span></span> 
<span data-ttu-id="8c50d-306">Указанная категория отмечается как многоэкземплярная и требует создания счетчика производительности с именем экземпляра.</span><span class="sxs-lookup"><span data-stu-id="8c50d-306">The category specified is marked as multi-instance and requires the performance counter to be created with an instance name.</span></span>  
  
<span data-ttu-id="8c50d-307">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-307">-or-</span></span> 
 <span data-ttu-id="8c50d-308">Длина параметра <paramref name="instanceName" /> превышает 127 символов.</span><span class="sxs-lookup"><span data-stu-id="8c50d-308"><paramref name="instanceName" /> is longer than 127 characters.</span></span>  
  
<span data-ttu-id="8c50d-309">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-309">-or-</span></span> 
 <span data-ttu-id="8c50d-310">Параметры <paramref name="categoryName" /> и <paramref name="counterName" /> были локализованы на разных языках.</span><span class="sxs-lookup"><span data-stu-id="8c50d-310"><paramref name="categoryName" /> and <paramref name="counterName" /> have been localized into different languages.</span></span></exception>
        <exception cref="T:System.ArgumentNullException"><span data-ttu-id="8c50d-311">Значение параметра <paramref name="categoryName" /> или <paramref name="counterName" /> — <see langword="null" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-311"><paramref name="categoryName" /> or <paramref name="counterName" /> is <see langword="null" />.</span></span></exception>
        <exception cref="T:System.ComponentModel.Win32Exception"><span data-ttu-id="8c50d-312">Произошла ошибка при обращении к API-интерфейсу системы.</span><span class="sxs-lookup"><span data-stu-id="8c50d-312">An error occurred when accessing a system API.</span></span></exception>
        <exception cref="T:System.UnauthorizedAccessException"><span data-ttu-id="8c50d-313">Код, выполняющийся без привилегий администратора, предпринял попытку считывания значения счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-313">Code that is executing without administrative privileges attempted to read a performance counter.</span></span></exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission"><span data-ttu-id="8c50d-314">для записи категории счетчика производительности, если свойство <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> имеет значение <see langword="false" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-314">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span></span> <span data-ttu-id="8c50d-315">Связанное перечисление: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-315">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span></span></permission>
      </Docs>
    </Member>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public PerformanceCounter (string categoryName, string counterName, string instanceName, string machineName);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor(string categoryName, string counterName, string instanceName, string machineName) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.#ctor(System.String,System.String,System.String,System.String)" />
      <MemberSignature Language="VB.NET" Value="Public Sub New (categoryName As String, counterName As String, instanceName As String, machineName As String)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; PerformanceCounter(System::String ^ categoryName, System::String ^ counterName, System::String ^ instanceName, System::String ^ machineName);" />
      <MemberSignature Language="F#" Value="new System.Diagnostics.PerformanceCounter : string * string * string * string -&gt; System.Diagnostics.PerformanceCounter" Usage="new System.Diagnostics.PerformanceCounter (categoryName, counterName, instanceName, machineName)" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters>
        <Parameter Name="categoryName" Type="System.String" />
        <Parameter Name="counterName" Type="System.String" />
        <Parameter Name="instanceName" Type="System.String" />
        <Parameter Name="machineName" Type="System.String" />
      </Parameters>
      <Docs>
        <param name="categoryName"><span data-ttu-id="8c50d-316">Имя категории счетчика производительности (объект производительности), которому соответствует этот счетчик производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-316">The name of the performance counter category (performance object) with which this performance counter is associated.</span></span></param>
        <param name="counterName"><span data-ttu-id="8c50d-317">Имя счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-317">The name of the performance counter.</span></span></param>
        <param name="instanceName"><span data-ttu-id="8c50d-318">Имя экземпляра категории счетчика производительности или пустая строка (""), если категория содержит единственный экземпляр.</span><span class="sxs-lookup"><span data-stu-id="8c50d-318">The name of the performance counter category instance, or an empty string (""), if the category contains a single instance.</span></span></param>
        <param name="machineName"><span data-ttu-id="8c50d-319">Компьютер, на котором существуют счетчик производительности и связанная с ним категория.</span><span class="sxs-lookup"><span data-stu-id="8c50d-319">The computer on which the performance counter and its associated category exist.</span></span></param>
        <summary><span data-ttu-id="8c50d-320">Выполняет инициализацию нового, доступного только для чтения экземпляра класса <see cref="T:System.Diagnostics.PerformanceCounter" /> и связывает этот экземпляр с конкретным системным или определенным пользователем счетчиком производительности на указанном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-320">Initializes a new, read-only instance of the <see cref="T:System.Diagnostics.PerformanceCounter" /> class and associates it with the specified system or custom performance counter and category instance, on the specified computer.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-321">В строках параметров регистр не учитывается.</span><span class="sxs-lookup"><span data-stu-id="8c50d-321">The parameter strings are not case-sensitive.</span></span>  
  
 <span data-ttu-id="8c50d-322">Эта перегрузка конструктора задает свойства <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>и <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> передаваемым значениям.</span><span class="sxs-lookup"><span data-stu-id="8c50d-322">This overload of the constructor sets the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>, and <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> properties to the values you pass in.</span></span>  
  
 <span data-ttu-id="8c50d-323">Этот конструктор инициализирует счетчик производительности и связывает экземпляр с существующим счетчиком (системой или пользовательским счетчиком) на указанном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-323">This constructor initializes the performance counter and associates the instance with an existing counter (either a system or a custom counter) on the specified computer.</span></span> <span data-ttu-id="8c50d-324">Значения, передаваемые для свойств <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> и <xref:System.Diagnostics.PerformanceCounter.MachineName%2A>, должны указывать на существующий счетчик производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-324">The values that you pass in for the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> and <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> properties must point to an existing performance counter.</span></span> <span data-ttu-id="8c50d-325">Если экземпляр счетчика производительности, на который указывает, является недопустимым, вызов конструктора выдаст исключение.</span><span class="sxs-lookup"><span data-stu-id="8c50d-325">If the performance counter instance you point to is not valid, calling the constructor throws an exception.</span></span> <span data-ttu-id="8c50d-326">Эта перегрузка может обращаться к любому счетчику только для чтения или чтения и записи, но делает это в режиме только для чтения.</span><span class="sxs-lookup"><span data-stu-id="8c50d-326">This overload can access any read-only or read/write counter, but does so in a read-only mode.</span></span> <span data-ttu-id="8c50d-327">Экземпляр <xref:System.Diagnostics.PerformanceCounter>, созданный с помощью этой перегрузки, не может записывать в счетчик, даже если сам счетчик доступен для чтения и записи.</span><span class="sxs-lookup"><span data-stu-id="8c50d-327">A <xref:System.Diagnostics.PerformanceCounter> instance created using this overload cannot write to the counter, even if the counter itself is read/write.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-328">Нельзя выполнять запись в удаленные счетчики производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-328">You cannot write to remote performance counters.</span></span> <span data-ttu-id="8c50d-329">Не существует перегрузки, которая позволяет указать экземпляр <xref:System.Diagnostics.PerformanceCounter> класса для чтения и записи, который подключается к удаленному компьютеру.</span><span class="sxs-lookup"><span data-stu-id="8c50d-329">There is no overload that allows you to specify a read/write instance of the <xref:System.Diagnostics.PerformanceCounter> class that connects to a remote computer.</span></span>  
  
 <span data-ttu-id="8c50d-330">Чтобы создать экземпляр категории производительности, укажите `instanceName` в конструкторе <xref:System.Diagnostics.PerformanceCounter.%23ctor%2A>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-330">To create a performance category instance, specify an `instanceName` on the <xref:System.Diagnostics.PerformanceCounter.%23ctor%2A> constructor.</span></span> <span data-ttu-id="8c50d-331">Если экземпляр категории, заданный с помощью `instanceName`, уже существует, новый объект будет ссылаться на существующий экземпляр категории.</span><span class="sxs-lookup"><span data-stu-id="8c50d-331">If the category instance specified by `instanceName` already exists the new object will reference the existing category instance.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-332">Для чтения счетчиков производительности в Windows Vista, Windows XP Professional x64 Edition или Windows Server 2003 необходимо быть членом группы "Пользователи системного монитора" или обладать правами администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-332">To read performance counters in Windows Vista, Windows XP Professional x64 Edition, or Windows Server 2003, you must either be a member of the Performance Monitor Users group or have administrative privileges.</span></span>  
>   
>  <span data-ttu-id="8c50d-333">Чтобы не допустить повышения привилегий для доступа к счетчикам производительности в Windows Vista, добавьте себя в группу Пользователи системного монитора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-333">To avoid having to elevate your privileges to access performance counters in Windows Vista, add yourself to the Performance Monitor Users group.</span></span>  
>   
>  <span data-ttu-id="8c50d-334">В Windows Vista привилегии пользователя определяются контролем учетных записей (UAC).</span><span class="sxs-lookup"><span data-stu-id="8c50d-334">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="8c50d-335">Члену встроенной группы "Администраторы" присваивается два маркера доступа на время выполнения: маркер доступа обычного пользователя и маркер доступа администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-335">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="8c50d-336">По умолчанию назначена роль обычного пользователя.</span><span class="sxs-lookup"><span data-stu-id="8c50d-336">By default, you are in the standard user role.</span></span> <span data-ttu-id="8c50d-337">Чтобы выполнить код, обращающийся к счетчикам производительности, необходимо сначала повысить привилегии обычного пользователя до администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-337">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="8c50d-338">Это можно сделать при запуске приложения, , щелкнув значок приложения правой кнопкой мыши и указав, что приложение должно запускаться от имени администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-338">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-339">В Windows Vista, когда удаленный компьютер входит в рабочую группу, может потребоваться отключить контроль учетных записей, чтобы учетная запись локального пользователя не была отфильтрована и ее можно было повысить до учетной записи администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-339">In Windows Vista, when the remote computer is a member of a workgroup, you may need to disable UAC so that the local user account is not filtered and can be elevated to an administrator account.</span></span> <span data-ttu-id="8c50d-340">По соображениям безопасности Отключение UAC должно быть последним средством.</span><span class="sxs-lookup"><span data-stu-id="8c50d-340">For security reasons, disabling UAC should be a last resort.</span></span> <span data-ttu-id="8c50d-341">Сведения об отключении UAC см. в разделе [Управление учетными записями пользователей и инструментарий WMI](https://go.microsoft.com/fwlink/?LinkId=91617).</span><span class="sxs-lookup"><span data-stu-id="8c50d-341">For information on disabling UAC, see [User Account Control and WMI](https://go.microsoft.com/fwlink/?LinkId=91617).</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException"><span data-ttu-id="8c50d-342">Параметр <paramref name="categoryName" /> является пустой строкой ("").</span><span class="sxs-lookup"><span data-stu-id="8c50d-342"><paramref name="categoryName" /> is an empty string ("").</span></span>  
  
<span data-ttu-id="8c50d-343">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-343">-or-</span></span> 
 <span data-ttu-id="8c50d-344">Параметр <paramref name="counterName" /> является пустой строкой ("").</span><span class="sxs-lookup"><span data-stu-id="8c50d-344"><paramref name="counterName" /> is an empty string ("").</span></span>  
  
<span data-ttu-id="8c50d-345">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-345">-or-</span></span> 
<span data-ttu-id="8c50d-346">Запрошенные параметры настройки разрешения на чтение/запись являются недопустимыми для этого счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-346">The read/write permission setting requested is invalid for this counter.</span></span>  
  
<span data-ttu-id="8c50d-347">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-347">-or-</span></span> 
<span data-ttu-id="8c50d-348">Счетчика не существует на указанном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-348">The counter does not exist on the specified computer.</span></span>  
  
<span data-ttu-id="8c50d-349">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-349">-or-</span></span> 
<span data-ttu-id="8c50d-350">Указанная категория отмечается как многоэкземплярная и требует создания счетчика производительности с именем экземпляра.</span><span class="sxs-lookup"><span data-stu-id="8c50d-350">The category specified is marked as multi-instance and requires the performance counter to be created with an instance name.</span></span>  
  
<span data-ttu-id="8c50d-351">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-351">-or-</span></span> 
 <span data-ttu-id="8c50d-352">Длина параметра <paramref name="instanceName" /> превышает 127 символов.</span><span class="sxs-lookup"><span data-stu-id="8c50d-352"><paramref name="instanceName" /> is longer than 127 characters.</span></span>  
  
<span data-ttu-id="8c50d-353">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-353">-or-</span></span> 
 <span data-ttu-id="8c50d-354">Параметры <paramref name="categoryName" /> и <paramref name="counterName" /> были локализованы на разных языках.</span><span class="sxs-lookup"><span data-stu-id="8c50d-354"><paramref name="categoryName" /> and <paramref name="counterName" /> have been localized into different languages.</span></span></exception>
        <exception cref="T:System.ArgumentException"><span data-ttu-id="8c50d-355">Недопустимый параметр <paramref name="machineName" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-355">The <paramref name="machineName" /> parameter is not valid.</span></span></exception>
        <exception cref="T:System.ArgumentNullException"><span data-ttu-id="8c50d-356">Значение параметра <paramref name="categoryName" /> или <paramref name="counterName" /> — <see langword="null" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-356"><paramref name="categoryName" /> or <paramref name="counterName" /> is <see langword="null" />.</span></span></exception>
        <exception cref="T:System.ComponentModel.Win32Exception"><span data-ttu-id="8c50d-357">Произошла ошибка при обращении к API-интерфейсу системы.</span><span class="sxs-lookup"><span data-stu-id="8c50d-357">An error occurred when accessing a system API.</span></span></exception>
        <exception cref="T:System.UnauthorizedAccessException"><span data-ttu-id="8c50d-358">Код, выполняющийся без привилегий администратора, предпринял попытку считывания значения счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-358">Code that is executing without administrative privileges attempted to read a performance counter.</span></span></exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission"><span data-ttu-id="8c50d-359">для записи категории счетчика производительности, если свойство <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> имеет значение <see langword="false" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-359">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span></span> <span data-ttu-id="8c50d-360">Связанное перечисление: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-360">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span></span></permission>
      </Docs>
    </Member>
    <Member MemberName="BeginInit">
      <MemberSignature Language="C#" Value="public void BeginInit ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void BeginInit() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.BeginInit" />
      <MemberSignature Language="VB.NET" Value="Public Sub BeginInit ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; virtual void BeginInit();" />
      <MemberSignature Language="F#" Value="abstract member BeginInit : unit -&gt; unit&#xA;override this.BeginInit : unit -&gt; unit" Usage="performanceCounter.BeginInit " />
      <MemberType>Method</MemberType>
      <Implements>
        <InterfaceMember>M:System.ComponentModel.ISupportInitialize.BeginInit</InterfaceMember>
      </Implements>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="8c50d-361">Начинает инициализацию экземпляра <see cref="T:System.Diagnostics.PerformanceCounter" />, используемого в форме или другим компонентом.</span><span class="sxs-lookup"><span data-stu-id="8c50d-361">Begins the initialization of a <see cref="T:System.Diagnostics.PerformanceCounter" /> instance used on a form or by another component.</span></span> <span data-ttu-id="8c50d-362">Инициализация происходит во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="8c50d-362">The initialization occurs at runtime.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-363">Среда разработки [!INCLUDE[vsprvslong](~/includes/vsprvslong-md.md)] использует этот метод для запуска инициализации компонента, используемого в форме или другим компонентом.</span><span class="sxs-lookup"><span data-stu-id="8c50d-363">The [!INCLUDE[vsprvslong](~/includes/vsprvslong-md.md)] design environment uses this method to start the initialization of a component that is used on a form or by another component.</span></span> <span data-ttu-id="8c50d-364">Метод <xref:System.Diagnostics.PerformanceCounter.EndInit%2A> завершает инициализацию.</span><span class="sxs-lookup"><span data-stu-id="8c50d-364">The <xref:System.Diagnostics.PerformanceCounter.EndInit%2A> method ends the initialization.</span></span> <span data-ttu-id="8c50d-365">Использование методов <xref:System.Diagnostics.PerformanceCounter.BeginInit%2A> и <xref:System.Diagnostics.PerformanceCounter.EndInit%2A> предотвращает использование компонента до полной инициализации.</span><span class="sxs-lookup"><span data-stu-id="8c50d-365">Using the <xref:System.Diagnostics.PerformanceCounter.BeginInit%2A> and <xref:System.Diagnostics.PerformanceCounter.EndInit%2A> methods prevents the component from being used before it is fully initialized.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="CategoryName">
      <MemberSignature Language="C#" Value="public string CategoryName { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string CategoryName" />
      <MemberSignature Language="DocId" Value="P:System.Diagnostics.PerformanceCounter.CategoryName" />
      <MemberSignature Language="VB.NET" Value="Public Property CategoryName As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ CategoryName { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.CategoryName : string with get, set" Usage="System.Diagnostics.PerformanceCounter.CategoryName" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.DefaultValue("")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.ReadOnly(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.RecommendedAsConfigurable(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.TypeConverter("System.Diagnostics.Design.CategoryValueConverter, System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1">
          <AttributeName>System.ComponentModel.TypeConverter("System.Diagnostics.Design.CategoryValueConverter, System.Design, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5">
          <AttributeName>System.ComponentModel.TypeConverter("System.Diagnostics.Design.CategoryValueConverter, System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.ComponentModel.SettingsBindable(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>get: System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="8c50d-366">Получает или задает имя категории счетчика производительности для этого счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-366">Gets or sets the name of the performance counter category for this performance counter.</span></span></summary>
        <value><span data-ttu-id="8c50d-367">Имя категории счетчика производительности (объект производительности), которому соответствует этот счетчик производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-367">The name of the performance counter category (performance object) with which this performance counter is associated.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-368"><xref:System.Diagnostics.PerformanceCounter.CategoryName%2A> отображается в поле `Performance Object` оснастки MMC диспетчера счетчиков производительности в `Add Counter` диалоговом окне.</span><span class="sxs-lookup"><span data-stu-id="8c50d-368">The <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A> is displayed in the `Performance Object` field of Performance Counter Manager MMC snap in's `Add Counter` dialog box.</span></span>  
  
 <span data-ttu-id="8c50d-369">Счетчик производительности отслеживает поведение категории или объекта производительности на компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-369">A performance counter monitors the behavior of a category, or performance object, on a computer.</span></span> <span data-ttu-id="8c50d-370">Категории включают физические компоненты (например, процессоры, диски и память) и системные объекты (например, процессы и потоки).</span><span class="sxs-lookup"><span data-stu-id="8c50d-370">Categories include physical components (such as processors, disks, and memory) and system objects (such as processes and threads).</span></span> <span data-ttu-id="8c50d-371">Системные счетчики, связанные с одним и тем же объектом производительности, группируются в категорию, которая указывает на их общий фокус.</span><span class="sxs-lookup"><span data-stu-id="8c50d-371">System counters that are related to the same performance object are grouped into a category that indicates their common focus.</span></span> <span data-ttu-id="8c50d-372">При создании экземпляра класса <xref:System.Diagnostics.PerformanceCounter> сначала указывается Категория, с которой будет взаимодействовать компонент, а затем выбирается счетчик из этой категории.</span><span class="sxs-lookup"><span data-stu-id="8c50d-372">When you create an instance of the <xref:System.Diagnostics.PerformanceCounter> class, you first indicate the category with which the component will interact, and then you choose a counter from that category.</span></span>  
  
 <span data-ttu-id="8c50d-373">Например, одна категория счетчиков Windows — это категория памяти.</span><span class="sxs-lookup"><span data-stu-id="8c50d-373">For example, one Windows counter category is the Memory category.</span></span> <span data-ttu-id="8c50d-374">Системные счетчики в этой категории следят за данными памяти, например количеством доступных байтов и числом кэшированных байтов.</span><span class="sxs-lookup"><span data-stu-id="8c50d-374">System counters within this category track memory data such as the number of bytes available and the number of bytes cached.</span></span> <span data-ttu-id="8c50d-375">Если вы хотите работать с кэшированными байтами в приложении, создайте экземпляр компонента <xref:System.Diagnostics.PerformanceCounter>, подключите его к категории памяти, а затем выберите соответствующий счетчик (в данном случае кэшированные байты) из этой категории.</span><span class="sxs-lookup"><span data-stu-id="8c50d-375">If you wanted to work with the bytes cached in your application, you would create an instance of the <xref:System.Diagnostics.PerformanceCounter> component, connect it to the Memory category, and then pick the appropriate counter (in this case, Cached Bytes) from that category.</span></span>  
  
 <span data-ttu-id="8c50d-376">Несмотря на то что в системе доступно гораздо больше категорий счетчиков, категории, которые, вероятно, взаимодействуют с наиболее часто, — это категории кэш, память, объекты, физический диск, процесс, процессор, сервер, система и поток.</span><span class="sxs-lookup"><span data-stu-id="8c50d-376">Although your system makes many more counter categories available, the categories that you will probably interact with most frequently are the Cache, Memory, Objects, PhysicalDisk, Process, Processor, Server, System, and Thread categories.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="8c50d-377">В следующем примере кода создается экземпляр класса <xref:System.Diagnostics.PerformanceCounter> по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="8c50d-377">The following code example creates a default instance of the <xref:System.Diagnostics.PerformanceCounter> class.</span></span> <span data-ttu-id="8c50d-378">После создания экземпляра задаются значения свойств <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>и <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>, а также отображаются результаты вызова метода <xref:System.Diagnostics.PerformanceCounter.NextValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-378">After the instance is created, the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> property values are set, and the results of a call to the <xref:System.Diagnostics.PerformanceCounter.NextValue%2A> method are displayed.</span></span>  
  
 [!code-cpp[PerfCounter#1](~/samples/snippets/cpp/VS_Snippets_CLR/PerfCounter/CPP/perfcounter.cpp#1)]
 [!code-csharp[PerfCounter#1](~/samples/snippets/csharp/VS_Snippets_CLR/PerfCounter/CS/perfcounter.cs#1)]
 [!code-vb[PerfCounter#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerfCounter/VB/perfcounter.vb#1)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentNullException"><span data-ttu-id="8c50d-379">Значение параметра <see cref="P:System.Diagnostics.PerformanceCounter.CategoryName" /> — <see langword="null" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-379">The <see cref="P:System.Diagnostics.PerformanceCounter.CategoryName" /> is <see langword="null" />.</span></span></exception>
        <altmember cref="P:System.Diagnostics.Process.ProcessName" />
      </Docs>
    </Member>
    <Member MemberName="Close">
      <MemberSignature Language="C#" Value="public void Close ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance void Close() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.Close" />
      <MemberSignature Language="VB.NET" Value="Public Sub Close ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; void Close();" />
      <MemberSignature Language="F#" Value="member this.Close : unit -&gt; unit" Usage="performanceCounter.Close " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="8c50d-380">Закрывает счетчик производительности и высвобождает все ресурсы, распределенные под этот экземпляр счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-380">Closes the performance counter and frees all the resources allocated by this performance counter instance.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-381">При связывании этого экземпляра <xref:System.Diagnostics.PerformanceCounter> с счетчиком производительности, который находится на сервере, система инициализирует экземпляр и выделяет память для хранения образца данных счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-381">When you associate this <xref:System.Diagnostics.PerformanceCounter> instance with a performance counter that resides on the server, the system initializes the instance and allocates memory to contain counter sample information.</span></span> <span data-ttu-id="8c50d-382">Метод <xref:System.Diagnostics.PerformanceCounter.Close%2A> освобождает ресурсы, выделенные объектом.</span><span class="sxs-lookup"><span data-stu-id="8c50d-382">The <xref:System.Diagnostics.PerformanceCounter.Close%2A> method frees the resources allocated by the object.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="CloseSharedResources">
      <MemberSignature Language="C#" Value="public static void CloseSharedResources ();" />
      <MemberSignature Language="ILAsm" Value=".method public static hidebysig void CloseSharedResources() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.CloseSharedResources" />
      <MemberSignature Language="VB.NET" Value="Public Shared Sub CloseSharedResources ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; static void CloseSharedResources();" />
      <MemberSignature Language="F#" Value="static member CloseSharedResources : unit -&gt; unit" Usage="System.Diagnostics.PerformanceCounter.CloseSharedResources " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="8c50d-383">Высвобождает разделенное состояние библиотеки счетчика производительности, распределенное под счетчики.</span><span class="sxs-lookup"><span data-stu-id="8c50d-383">Frees the performance counter library shared state allocated by the counters.</span></span></summary>
        <remarks>To be added.</remarks>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission"><span data-ttu-id="8c50d-384">для чтения категории счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-384">for reading the performance counter category.</span></span> <span data-ttu-id="8c50d-385">Связанное перечисление: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-385">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />.</span></span></permission>
      </Docs>
    </Member>
    <Member MemberName="CounterHelp">
      <MemberSignature Language="C#" Value="public string CounterHelp { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string CounterHelp" />
      <MemberSignature Language="DocId" Value="P:System.Diagnostics.PerformanceCounter.CounterHelp" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property CounterHelp As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ CounterHelp { System::String ^ get(); };" />
      <MemberSignature Language="F#" Value="member this.CounterHelp : string" Usage="System.Diagnostics.PerformanceCounter.CounterHelp" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.DesignerSerializationVisibility(System.ComponentModel.DesignerSerializationVisibility.Hidden)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.ReadOnly(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="xamarinmac-3.0">
          <AttributeName>System.Diagnostics.MonitoringDescription("A description describing the counter.")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="xamarinmac-3.0">
          <AttributeName>System.MonoTODO</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.Diagnostics.MonitoringDescription("PC_CounterHelp")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="8c50d-386">Получает описание для этого счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-386">Gets the description for this performance counter.</span></span></summary>
        <value><span data-ttu-id="8c50d-387">Описание элемента или количества, которое измеряет этот счетчик производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-387">A description of the item or quantity that this performance counter measures.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-388">Диалоговое окно Добавление счетчиков оснастки MMC "Диспетчер счетчиков производительности" отображает <xref:System.Diagnostics.PerformanceCounter.CounterHelp%2A> текст, когда пользователь выбирает счетчик из списка счетчиков и нажимает кнопку объяснить.</span><span class="sxs-lookup"><span data-stu-id="8c50d-388">The Add Counters dialog box of the Performance Counter Manager MMC snap in displays the <xref:System.Diagnostics.PerformanceCounter.CounterHelp%2A> text when a user selects a counter from the counters list and clicks the Explain button.</span></span>  
  
 <span data-ttu-id="8c50d-389">При создании нового счетчика используйте <xref:System.Diagnostics.PerformanceCounter.CounterHelp%2A> текст, чтобы описать, что делает монитор счетчиков, чтобы пользователь мог определить, следует ли добавить счетчик в дисплей системного монитора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-389">When you create a new counter, use the <xref:System.Diagnostics.PerformanceCounter.CounterHelp%2A> text to describe what the counter monitors do so the user can determine whether to add the counter to the System Monitor's display.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-390">Если значение свойства <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> и Категория счетчика производительности была создана с помощью .NET Framework версии 1,0 или 1,1, создается <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-390">If the value for the <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> property is <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> and the performance counter category was created with .NET Framework version 1.0 or 1.1, an <xref:System.InvalidOperationException> is thrown.</span></span> <span data-ttu-id="8c50d-391">Категории счетчиков производительности, созданные в более ранних версиях, используют глобальную общую память, а значение для <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> должно быть <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-391">Performance counter categories created with earlier versions use global shared memory, and the value for <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span> <span data-ttu-id="8c50d-392">Если категория не используется приложениями, работающими в версиях 1,0 или 1,1 .NET Framework, удалите категорию и создайте ее заново.</span><span class="sxs-lookup"><span data-stu-id="8c50d-392">If the category is not used by applications running on versions 1.0 or 1.1 of the .NET Framework, delete and recreate the category.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-393">Для чтения счетчиков производительности в Windows Vista, Windows XP Professional x64 Edition или Windows Server 2003 необходимо быть членом группы "Пользователи системного монитора" или обладать правами администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-393">To read performance counters in Windows Vista, Windows XP Professional x64 Edition, or Windows Server 2003, you must either be a member of the Performance Monitor Users group or have administrative privileges.</span></span>  
>   
>  <span data-ttu-id="8c50d-394">Чтобы не допустить повышения привилегий для доступа к счетчикам производительности в Windows Vista, добавьте себя в группу Пользователи системного монитора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-394">To avoid having to elevate your privileges to access performance counters in Windows Vista, add yourself to the Performance Monitor Users group.</span></span>  
>   
>  <span data-ttu-id="8c50d-395">В Windows Vista привилегии пользователя определяются контролем учетных записей (UAC).</span><span class="sxs-lookup"><span data-stu-id="8c50d-395">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="8c50d-396">Члену встроенной группы "Администраторы" присваивается два маркера доступа на время выполнения: маркер доступа обычного пользователя и маркер доступа администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-396">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="8c50d-397">По умолчанию назначена роль обычного пользователя.</span><span class="sxs-lookup"><span data-stu-id="8c50d-397">By default, you are in the standard user role.</span></span> <span data-ttu-id="8c50d-398">Чтобы выполнить код, обращающийся к счетчикам производительности, необходимо сначала повысить привилегии обычного пользователя до администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-398">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="8c50d-399">Это можно сделать при запуске приложения, , щелкнув значок приложения правой кнопкой мыши и указав, что приложение должно запускаться от имени администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-399">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException"><span data-ttu-id="8c50d-400">Экземпляр класса <see cref="T:System.Diagnostics.PerformanceCounter" /> не связан со счетчиком производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-400">The <see cref="T:System.Diagnostics.PerformanceCounter" /> instance is not associated with a performance counter.</span></span>  
  
<span data-ttu-id="8c50d-401">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-401">-or-</span></span> 
<span data-ttu-id="8c50d-402">При использовании глобальной общей памяти свойству <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> присваивается значение <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-402">The <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> property is set to <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" /> when using global shared memory.</span></span></exception>
        <exception cref="T:System.UnauthorizedAccessException"><span data-ttu-id="8c50d-403">Код, выполняющийся без привилегий администратора, предпринял попытку считывания значения счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-403">Code that is executing without administrative privileges attempted to read a performance counter.</span></span></exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission"><span data-ttu-id="8c50d-404">для чтения категории счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-404">for reading the performance counter category.</span></span> <span data-ttu-id="8c50d-405">Связанное перечисление: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-405">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />.</span></span></permission>
      </Docs>
    </Member>
    <Member MemberName="CounterName">
      <MemberSignature Language="C#" Value="public string CounterName { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string CounterName" />
      <MemberSignature Language="DocId" Value="P:System.Diagnostics.PerformanceCounter.CounterName" />
      <MemberSignature Language="VB.NET" Value="Public Property CounterName As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ CounterName { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.CounterName : string with get, set" Usage="System.Diagnostics.PerformanceCounter.CounterName" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.DefaultValue("")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.ReadOnly(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.RecommendedAsConfigurable(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.TypeConverter("System.Diagnostics.Design.CounterNameConverter, System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1">
          <AttributeName>System.ComponentModel.TypeConverter("System.Diagnostics.Design.CounterNameConverter, System.Design, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5">
          <AttributeName>System.ComponentModel.TypeConverter("System.Diagnostics.Design.CounterNameConverter, System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.ComponentModel.SettingsBindable(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>get: System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="8c50d-406">Получает или задает имя категории счетчика производительности, связанного с данным экземпляром <see cref="T:System.Diagnostics.PerformanceCounter" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-406">Gets or sets the name of the performance counter that is associated with this <see cref="T:System.Diagnostics.PerformanceCounter" /> instance.</span></span></summary>
        <value><span data-ttu-id="8c50d-407">Имя счетчика, который описывает подсчитываемое количество.</span><span class="sxs-lookup"><span data-stu-id="8c50d-407">The name of the counter, which generally describes the quantity being counted.</span></span> <span data-ttu-id="8c50d-408">Имя, отображаемое в списке счетчиков закладки диспетчера счетчиков производительности MMC в диалоговом окне "Добавить счетчики".</span><span class="sxs-lookup"><span data-stu-id="8c50d-408">This name is displayed in the list of counters of the Performance Counter Manager MMC snap in's Add Counters dialog box.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-409">Список доступных ранее счетчиков можно получить в [диалоговом окне Add Counters (Добавление счетчиков](https://go.microsoft.com/fwlink/p/?LinkId=257854)) диспетчера производительности Windows.</span><span class="sxs-lookup"><span data-stu-id="8c50d-409">You can get a list of available pre-existing counters from the Windows Performance Manager's [Add Counters dialog box](https://go.microsoft.com/fwlink/p/?LinkId=257854).</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="8c50d-410">В следующем примере кода показано, как задать для свойства <xref:System.Diagnostics.PerformanceCounter.CounterName%2A> обычное имя счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-410">The following code example shows how to set the <xref:System.Diagnostics.PerformanceCounter.CounterName%2A> property to a typical counter name.</span></span>  
  
 [!code-cpp[PerfCounter#1](~/samples/snippets/cpp/VS_Snippets_CLR/PerfCounter/CPP/perfcounter.cpp#1)]
 [!code-csharp[PerfCounter#1](~/samples/snippets/csharp/VS_Snippets_CLR/PerfCounter/CS/perfcounter.cs#1)]
 [!code-vb[PerfCounter#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerfCounter/VB/perfcounter.vb#1)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentNullException"><span data-ttu-id="8c50d-411">Значение параметра <see cref="P:System.Diagnostics.PerformanceCounter.CounterName" /> — <see langword="null" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-411">The <see cref="P:System.Diagnostics.PerformanceCounter.CounterName" /> is <see langword="null" />.</span></span></exception>
      </Docs>
    </Member>
    <Member MemberName="CounterType">
      <MemberSignature Language="C#" Value="public System.Diagnostics.PerformanceCounterType CounterType { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance valuetype System.Diagnostics.PerformanceCounterType CounterType" />
      <MemberSignature Language="DocId" Value="P:System.Diagnostics.PerformanceCounter.CounterType" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property CounterType As PerformanceCounterType" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::Diagnostics::PerformanceCounterType CounterType { System::Diagnostics::PerformanceCounterType get(); };" />
      <MemberSignature Language="F#" Value="member this.CounterType : System.Diagnostics.PerformanceCounterType" Usage="System.Diagnostics.PerformanceCounter.CounterType" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.DesignerSerializationVisibility(System.ComponentModel.DesignerSerializationVisibility.Hidden)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="xamarinmac-3.0">
          <AttributeName>System.Diagnostics.MonitoringDescription("The type of the counter.")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.Diagnostics.MonitoringDescription("PC_CounterType")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Diagnostics.PerformanceCounterType</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="8c50d-412">Получает тип счетчика, с которым связан счетчик производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-412">Gets the counter type of the associated performance counter.</span></span></summary>
        <value><span data-ttu-id="8c50d-413">Значение <see cref="T:System.Diagnostics.PerformanceCounterType" />, которое описывает, каким образом счетчик взаимодействует с отслеживающим приложением, и характер значений, которые он содержит (например, подсчитано или не подсчитано).</span><span class="sxs-lookup"><span data-stu-id="8c50d-413">A <see cref="T:System.Diagnostics.PerformanceCounterType" /> that describes both how the counter interacts with a monitoring application and the nature of the values it contains (for example, calculated or uncalculated).</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-414">Перечисление <xref:System.Diagnostics.PerformanceCounterType> содержит типы счетчиков производительности, с которыми можно взаимодействовать.</span><span class="sxs-lookup"><span data-stu-id="8c50d-414">The <xref:System.Diagnostics.PerformanceCounterType> enumeration contains the types of performance counters that you can interact with.</span></span> <span data-ttu-id="8c50d-415">Некоторые типы счетчиков представляют вычисляемые значения, такие как среднее значение измерений счетчика, занимаемое системой.</span><span class="sxs-lookup"><span data-stu-id="8c50d-415">Some of the counter types represent calculated values, such as the average of the counter measurements the system has taken.</span></span> <span data-ttu-id="8c50d-416">Другие типы представляют необработанные или невычисленные значения.</span><span class="sxs-lookup"><span data-stu-id="8c50d-416">Other types represent raw, or uncalculated, values.</span></span> <span data-ttu-id="8c50d-417">В следующей таблице приведены типы счетчиков, с которыми вы будете взаимодействовать чаще всего.</span><span class="sxs-lookup"><span data-stu-id="8c50d-417">The following table shows the counter types that you will interact with most frequently.</span></span>  
  
|<span data-ttu-id="8c50d-418">Ответственность за счетчик</span><span class="sxs-lookup"><span data-stu-id="8c50d-418">Counter's Responsibility</span></span>|<span data-ttu-id="8c50d-419">Значение Перформанцекаунтертипе</span><span class="sxs-lookup"><span data-stu-id="8c50d-419">PerformanceCounterType Value</span></span>|<span data-ttu-id="8c50d-420">Пример</span><span class="sxs-lookup"><span data-stu-id="8c50d-420">Example</span></span>|  
|------------------------------|----------------------------------|-------------|  
|<span data-ttu-id="8c50d-421">Вести простой счетчик элементов или операций.</span><span class="sxs-lookup"><span data-stu-id="8c50d-421">Maintain a simple count of items or operations.</span></span>|`NumberOfItems32`|<span data-ttu-id="8c50d-422">Отслеживание количества заказов, полученных в виде 32-разрядного целого числа.</span><span class="sxs-lookup"><span data-stu-id="8c50d-422">Tracking the number of orders received as a 32-bit integer.</span></span>|  
|<span data-ttu-id="8c50d-423">Поддержка простого счетчика с более высокой емкостью.</span><span class="sxs-lookup"><span data-stu-id="8c50d-423">Maintain a higher-capacity simple count.</span></span>|`NumberOfItems64`|<span data-ttu-id="8c50d-424">Отслеживание количества заказов для сайта с очень большим объемом, хранящегося в виде 64-разрядного целого числа.</span><span class="sxs-lookup"><span data-stu-id="8c50d-424">Tracking the number of orders for a site with very high volume, stored as a 64-bit integer.</span></span>|  
|<span data-ttu-id="8c50d-425">Следите за количеством элементов или операций в секунду.</span><span class="sxs-lookup"><span data-stu-id="8c50d-425">Track the number of items or operations per second.</span></span>|`RateOfCountsPerSecond32`|<span data-ttu-id="8c50d-426">Количество отслеживаемых заказов в секунду на сайте.</span><span class="sxs-lookup"><span data-stu-id="8c50d-426">Tracking orders received per second on a site.</span></span>|  
|<span data-ttu-id="8c50d-427">Отслеживание количества элементов или операций в секунду с более высокой емкостью.</span><span class="sxs-lookup"><span data-stu-id="8c50d-427">Track a higher-capacity number of items or operations per second.</span></span>|`RateOfCountsPerSecond64`|<span data-ttu-id="8c50d-428">Количество отслеживаемых заказов в секунду на сайте с очень большим объемом.</span><span class="sxs-lookup"><span data-stu-id="8c50d-428">Tracking orders received per second on a site with very high volume.</span></span>|  
|<span data-ttu-id="8c50d-429">Вычисление среднего времени для выполнения процесса или обработки элемента</span><span class="sxs-lookup"><span data-stu-id="8c50d-429">Calculate the average time to perform a process or to process an item</span></span>|`AverageTimer32`|<span data-ttu-id="8c50d-430">Вычислите среднее время обработки заказа.</span><span class="sxs-lookup"><span data-stu-id="8c50d-430">Calculate the average time an order takes to be processed.</span></span>|  
  
 <span data-ttu-id="8c50d-431">При создании счетчика, тип которого требует использования соответствующего базового счетчика, необходимо объявить счетчик и базу в <xref:System.Diagnostics.CounterCreationDataCollection>, передаваемых в метод <xref:System.Diagnostics.PerformanceCounterCategory.Create%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-431">When you create a counter whose type requires the use of a corresponding base counter, you must declare the counter and the base in the <xref:System.Diagnostics.CounterCreationDataCollection> you pass into the <xref:System.Diagnostics.PerformanceCounterCategory.Create%2A?displayProperty=nameWithType> method.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-432">Если значение свойства <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> и Категория счетчика производительности была создана с помощью .NET Framework версии 1,0 или 1,1, создается <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-432">If the value for the <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> property is <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> and the performance counter category was created with .NET Framework version 1.0 or 1.1, an <xref:System.InvalidOperationException> is thrown.</span></span> <span data-ttu-id="8c50d-433">Категории счетчиков производительности, созданные в более ранних версиях, используют глобальную общую память, а значение для <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> должно быть <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-433">Performance counter categories created with earlier versions use global shared memory, and the value for <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span> <span data-ttu-id="8c50d-434">Если категория не используется приложениями, работающими в версиях 1,0 или 1,1 .NET Framework, удалите категорию и создайте ее заново.</span><span class="sxs-lookup"><span data-stu-id="8c50d-434">If the category is not used by applications running on versions 1.0 or 1.1 of the .NET Framework, delete and recreate the category.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-435">Для чтения счетчиков производительности в Windows Vista, Windows XP Professional x64 Edition или Windows Server 2003 необходимо быть членом группы "Пользователи системного монитора" или обладать правами администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-435">To read performance counters in Windows Vista, Windows XP Professional x64 Edition, or Windows Server 2003, you must either be a member of the Performance Monitor Users group or have administrative privileges.</span></span>  
>   
>  <span data-ttu-id="8c50d-436">Чтобы не допустить повышения привилегий для доступа к счетчикам производительности в Windows Vista, добавьте себя в группу Пользователи системного монитора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-436">To avoid having to elevate your privileges to access performance counters in Windows Vista, add yourself to the Performance Monitor Users group.</span></span>  
>   
>  <span data-ttu-id="8c50d-437">В Windows Vista привилегии пользователя определяются контролем учетных записей (UAC).</span><span class="sxs-lookup"><span data-stu-id="8c50d-437">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="8c50d-438">Члену встроенной группы "Администраторы" присваивается два маркера доступа на время выполнения: маркер доступа обычного пользователя и маркер доступа администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-438">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="8c50d-439">По умолчанию назначена роль обычного пользователя.</span><span class="sxs-lookup"><span data-stu-id="8c50d-439">By default, you are in the standard user role.</span></span> <span data-ttu-id="8c50d-440">Чтобы выполнить код, обращающийся к счетчикам производительности, необходимо сначала повысить привилегии обычного пользователя до администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-440">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="8c50d-441">Это можно сделать при запуске приложения, , щелкнув значок приложения правой кнопкой мыши и указав, что приложение должно запускаться от имени администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-441">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException"><span data-ttu-id="8c50d-442">Экземпляр класса, неправильно связанный со счетчиком производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-442">The instance is not correctly associated with a performance counter.</span></span>  
  
<span data-ttu-id="8c50d-443">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-443">-or-</span></span> 
<span data-ttu-id="8c50d-444">При использовании глобальной общей памяти свойству <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> присваивается значение <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-444">The <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> property is set to <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" /> when using global shared memory.</span></span></exception>
        <exception cref="T:System.UnauthorizedAccessException"><span data-ttu-id="8c50d-445">Код, выполняющийся без привилегий администратора, предпринял попытку считывания значения счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-445">Code that is executing without administrative privileges attempted to read a performance counter.</span></span></exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission"><span data-ttu-id="8c50d-446">для чтения категории счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-446">for reading the performance counter category.</span></span> <span data-ttu-id="8c50d-447">Связанное перечисление: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-447">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />.</span></span></permission>
        <altmember cref="T:System.Diagnostics.PerformanceCounterType" />
      </Docs>
    </Member>
    <Member MemberName="Decrement">
      <MemberSignature Language="C#" Value="public long Decrement ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance int64 Decrement() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.Decrement" />
      <MemberSignature Language="VB.NET" Value="Public Function Decrement () As Long" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; long Decrement();" />
      <MemberSignature Language="F#" Value="member this.Decrement : unit -&gt; int64" Usage="performanceCounter.Decrement " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Int64</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="8c50d-448">Уменьшает значение связанного счетчика производительности на единицу через эффективные атомарные операции.</span><span class="sxs-lookup"><span data-stu-id="8c50d-448">Decrements the associated performance counter by one through an efficient atomic operation.</span></span></summary>
        <returns><span data-ttu-id="8c50d-449">Уменьшенное значение счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-449">The decremented counter value.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-450">Можно записывать только в пользовательские счетчики.</span><span class="sxs-lookup"><span data-stu-id="8c50d-450">You can write only to custom counters.</span></span> <span data-ttu-id="8c50d-451">Все системные счетчики доступны только для чтения.</span><span class="sxs-lookup"><span data-stu-id="8c50d-451">All system counters are read-only.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-452">Методы <xref:System.Diagnostics.PerformanceCounter.Increment%2A>, <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>и <xref:System.Diagnostics.PerformanceCounter.Decrement%2A> используют взаимоблокировки для обновления значения счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-452">The <xref:System.Diagnostics.PerformanceCounter.Increment%2A>, <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>, and <xref:System.Diagnostics.PerformanceCounter.Decrement%2A> methods use interlocks to update the counter value.</span></span> <span data-ttu-id="8c50d-453">Это позволяет точно синхронизировать значение счетчика в многопоточных или многопроцессных сценариях, но также приводит к снижению производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-453">This helps keep the counter value accurate in multithreaded or multiprocess scenarios, but also results in a performance penalty.</span></span> <span data-ttu-id="8c50d-454">Если точность, предоставляемая блокируемыми операциями, не нужна, можно обновить свойство <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> напрямую в 5 раз, чтобы улучшить производительность.</span><span class="sxs-lookup"><span data-stu-id="8c50d-454">If you do not need the accuracy that interlocked operations provide, you can update the <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> property directly for up to a 5 times performance improvement.</span></span>  <span data-ttu-id="8c50d-455">Однако в многопоточных сценариях некоторые обновления значения счетчика могут игнорироваться, что приводит к неточности данных.</span><span class="sxs-lookup"><span data-stu-id="8c50d-455">However, in multithreaded scenarios, some updates to the counter value might be ignored, resulting in inaccurate data.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-456">Если значение свойства <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> и Категория счетчика производительности была создана с помощью .NET Framework версии 1,0 или 1,1, создается <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-456">If the value for the <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> property is <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> and the performance counter category was created with .NET Framework version 1.0 or 1.1, an <xref:System.InvalidOperationException> is thrown.</span></span> <span data-ttu-id="8c50d-457">Категории счетчиков производительности, созданные в более ранних версиях, используют глобальную общую память, а значение для <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> должно быть <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-457">Performance counter categories created with earlier versions use global shared memory, and the value for <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span> <span data-ttu-id="8c50d-458">Если категория не используется приложениями, работающими в версиях 1,0 или 1,1 .NET Framework, удалите категорию и создайте ее заново.</span><span class="sxs-lookup"><span data-stu-id="8c50d-458">If the category is not used by applications running on versions 1.0 or 1.1 of the .NET Framework, delete and recreate the category.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException"><span data-ttu-id="8c50d-459">Счетчик доступен только для чтения, поэтому приложение не может уменьшить его значение.</span><span class="sxs-lookup"><span data-stu-id="8c50d-459">The counter is read-only, so the application cannot decrement it.</span></span>  
  
<span data-ttu-id="8c50d-460">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-460">-or-</span></span> 
<span data-ttu-id="8c50d-461">Экземпляр класса, неправильно связанный со счетчиком производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-461">The instance is not correctly associated with a performance counter.</span></span>  
  
<span data-ttu-id="8c50d-462">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-462">-or-</span></span> 
<span data-ttu-id="8c50d-463">При использовании глобальной общей памяти свойству <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> присваивается значение <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-463">The <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> property is set to <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" /> when using global shared memory.</span></span></exception>
        <exception cref="T:System.ComponentModel.Win32Exception"><span data-ttu-id="8c50d-464">Произошла ошибка при обращении к API-интерфейсу системы.</span><span class="sxs-lookup"><span data-stu-id="8c50d-464">An error occurred when accessing a system API.</span></span></exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission"><span data-ttu-id="8c50d-465">для записи категории счетчика производительности, если свойство <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> имеет значение <see langword="false" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-465">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span></span> <span data-ttu-id="8c50d-466">Связанное перечисление: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-466">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span></span></permission>
        <threadsafe><span data-ttu-id="8c50d-467">Этот метод является потокобезопасным.</span><span class="sxs-lookup"><span data-stu-id="8c50d-467">This method is thread safe.</span></span></threadsafe>
      </Docs>
    </Member>
    <Member MemberName="DefaultFileMappingSize">
      <MemberSignature Language="C#" Value="public static int DefaultFileMappingSize;" />
      <MemberSignature Language="ILAsm" Value=".field public static int32 DefaultFileMappingSize" />
      <MemberSignature Language="DocId" Value="F:System.Diagnostics.PerformanceCounter.DefaultFileMappingSize" />
      <MemberSignature Language="VB.NET" Value="Public Shared DefaultFileMappingSize As Integer " />
      <MemberSignature Language="C++ CLI" Value="public: static int DefaultFileMappingSize;" />
      <MemberSignature Language="F#" Value=" staticval mutable DefaultFileMappingSize : int" Usage="System.Diagnostics.PerformanceCounter.DefaultFileMappingSize" />
      <MemberType>Field</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="xamarinmac-3.0">
          <AttributeName>System.Obsolete</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netcore-2.0;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netcore-2.1;netframework-4.8;dotnet-plat-ext-2.1;netcore-2.2;netcore-3.0;dotnet-plat-ext-2.2;dotnet-plat-ext-3.0">
          <AttributeName>System.Obsolete("This field has been deprecated and is not used.  Use machine.config or an application configuration file to set the size of the PerformanceCounter file mapping.")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Int32</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="8c50d-468">Он указывает размер глобальной памяти в байтах, используемой счетчиками производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-468">Specifies the size, in bytes, of the global memory shared by performance counters.</span></span> <span data-ttu-id="8c50d-469">Размер по умолчанию равен 524,288 байт.</span><span class="sxs-lookup"><span data-stu-id="8c50d-469">The default size is 524,288 bytes.</span></span></summary>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
    <Member MemberName="Dispose">
      <MemberSignature Language="C#" Value="protected override void Dispose (bool disposing);" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig virtual instance void Dispose(bool disposing) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.Dispose(System.Boolean)" />
      <MemberSignature Language="VB.NET" Value="Protected Overrides Sub Dispose (disposing As Boolean)" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; override void Dispose(bool disposing);" />
      <MemberSignature Language="F#" Value="abstract member Dispose : bool -&gt; unit&#xA;override this.Dispose : bool -&gt; unit" Usage="performanceCounter.Dispose disposing" FrameworkAlternate="dotnet-plat-ext-2.1;dotnet-plat-ext-2.2;dotnet-plat-ext-3.0;netcore-3.0" />
      <MemberSignature Language="F#" Value="override this.Dispose : bool -&gt; unit" Usage="performanceCounter.Dispose disposing" FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;xamarinmac-3.0" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="disposing" Type="System.Boolean" />
      </Parameters>
      <Docs>
        <param name="disposing">To be added.</param>
        <summary>To be added.</summary>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
    <Member MemberName="EndInit">
      <MemberSignature Language="C#" Value="public void EndInit ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void EndInit() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.EndInit" />
      <MemberSignature Language="VB.NET" Value="Public Sub EndInit ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; virtual void EndInit();" />
      <MemberSignature Language="F#" Value="abstract member EndInit : unit -&gt; unit&#xA;override this.EndInit : unit -&gt; unit" Usage="performanceCounter.EndInit " />
      <MemberType>Method</MemberType>
      <Implements>
        <InterfaceMember>M:System.ComponentModel.ISupportInitialize.EndInit</InterfaceMember>
      </Implements>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="8c50d-470">Завершает инициализацию экземпляра <see cref="T:System.Diagnostics.PerformanceCounter" />, используемого в форме или другим компонентом.</span><span class="sxs-lookup"><span data-stu-id="8c50d-470">Ends the initialization of a <see cref="T:System.Diagnostics.PerformanceCounter" /> instance that is used on a form or by another component.</span></span> <span data-ttu-id="8c50d-471">Инициализация происходит во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="8c50d-471">The initialization occurs at runtime.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-472">Среда разработки [!INCLUDE[vsprvslong](~/includes/vsprvslong-md.md)] использует этот метод для завершения инициализации компонента, используемого в форме или другим компонентом.</span><span class="sxs-lookup"><span data-stu-id="8c50d-472">The [!INCLUDE[vsprvslong](~/includes/vsprvslong-md.md)] design environment uses this method to end the initialization of a component that is used on a form or by another component.</span></span> <span data-ttu-id="8c50d-473">Метод <xref:System.Diagnostics.PerformanceCounter.BeginInit%2A> запускает инициализацию.</span><span class="sxs-lookup"><span data-stu-id="8c50d-473">The <xref:System.Diagnostics.PerformanceCounter.BeginInit%2A> method starts the initialization.</span></span> <span data-ttu-id="8c50d-474">Использование методов <xref:System.Diagnostics.PerformanceCounter.BeginInit%2A> и <xref:System.Diagnostics.PerformanceCounter.EndInit%2A> предотвращает использование компонента до полной инициализации.</span><span class="sxs-lookup"><span data-stu-id="8c50d-474">Using the <xref:System.Diagnostics.PerformanceCounter.BeginInit%2A> and <xref:System.Diagnostics.PerformanceCounter.EndInit%2A> methods prevents the component from being used before it is fully initialized.</span></span>  
  
 ]]></format>
        </remarks>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission"><span data-ttu-id="8c50d-475">для записи категории счетчика производительности, если свойство <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> имеет значение <see langword="false" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-475">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span></span> <span data-ttu-id="8c50d-476">Связанное перечисление: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-476">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span></span></permission>
      </Docs>
    </Member>
    <Member MemberName="Increment">
      <MemberSignature Language="C#" Value="public long Increment ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance int64 Increment() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.Increment" />
      <MemberSignature Language="VB.NET" Value="Public Function Increment () As Long" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; long Increment();" />
      <MemberSignature Language="F#" Value="member this.Increment : unit -&gt; int64" Usage="performanceCounter.Increment " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Int64</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="8c50d-477">Увеличивает значение связанного счетчика производительности на единицу через эффективные атомарные операции.</span><span class="sxs-lookup"><span data-stu-id="8c50d-477">Increments the associated performance counter by one through an efficient atomic operation.</span></span></summary>
        <returns><span data-ttu-id="8c50d-478">Увеличенное значение счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-478">The incremented counter value.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-479">Можно записывать только в пользовательские счетчики.</span><span class="sxs-lookup"><span data-stu-id="8c50d-479">You can write only to custom counters.</span></span> <span data-ttu-id="8c50d-480">Все системные счетчики доступны только для чтения.</span><span class="sxs-lookup"><span data-stu-id="8c50d-480">All system counters are read-only.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-481">Методы <xref:System.Diagnostics.PerformanceCounter.Increment%2A>, <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>и <xref:System.Diagnostics.PerformanceCounter.Decrement%2A> используют взаимоблокировки для обновления значения счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-481">The <xref:System.Diagnostics.PerformanceCounter.Increment%2A>, <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>, and <xref:System.Diagnostics.PerformanceCounter.Decrement%2A> methods use interlocks to update the counter value.</span></span> <span data-ttu-id="8c50d-482">Это позволяет точно синхронизировать значение счетчика в многопоточных или многопроцессных сценариях, но также приводит к снижению производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-482">This helps keep the counter value accurate in multithreaded or multiprocess scenarios, but also results in a performance penalty.</span></span> <span data-ttu-id="8c50d-483">Если точность, предоставляемая блокируемыми операциями, не нужна, можно обновить свойство <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> напрямую в 5 раз, чтобы улучшить производительность.</span><span class="sxs-lookup"><span data-stu-id="8c50d-483">If you do not need the accuracy that interlocked operations provide, you can update the <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> property directly for up to a 5 times performance improvement.</span></span>  <span data-ttu-id="8c50d-484">Однако в многопоточных сценариях некоторые обновления значения счетчика могут игнорироваться, что приводит к неточности данных.</span><span class="sxs-lookup"><span data-stu-id="8c50d-484">However, in multithreaded scenarios, some updates to the counter value might be ignored, resulting in inaccurate data.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-485">Если значение свойства <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> и Категория счетчика производительности была создана с помощью .NET Framework версии 1,0 или 1,1, создается <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-485">If the value for the <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> property is <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> and the performance counter category was created with .NET Framework version 1.0 or 1.1, an <xref:System.InvalidOperationException> is thrown.</span></span> <span data-ttu-id="8c50d-486">Категории счетчиков производительности, созданные в более ранних версиях, используют глобальную общую память, а значение для <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> должно быть <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-486">Performance counter categories created with earlier versions use global shared memory, and the value for <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span> <span data-ttu-id="8c50d-487">Если категория не используется приложениями, работающими в версиях 1,0 или 1,1 .NET Framework, удалите категорию и создайте ее заново.</span><span class="sxs-lookup"><span data-stu-id="8c50d-487">If the category is not used by applications running on versions 1.0 or 1.1 of the .NET Framework, delete and recreate the category.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException"><span data-ttu-id="8c50d-488">Счетчик доступен только для чтения, поэтому приложение не может увеличить его значение.</span><span class="sxs-lookup"><span data-stu-id="8c50d-488">The counter is read-only, so the application cannot increment it.</span></span>  
  
<span data-ttu-id="8c50d-489">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-489">-or-</span></span> 
<span data-ttu-id="8c50d-490">Экземпляр класса, неправильно связанный со счетчиком производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-490">The instance is not correctly associated with a performance counter.</span></span>  
  
<span data-ttu-id="8c50d-491">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-491">-or-</span></span> 
<span data-ttu-id="8c50d-492">При использовании глобальной общей памяти свойству <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> присваивается значение <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-492">The <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> property is set to <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" /> when using global shared memory.</span></span></exception>
        <exception cref="T:System.ComponentModel.Win32Exception"><span data-ttu-id="8c50d-493">Произошла ошибка при обращении к API-интерфейсу системы.</span><span class="sxs-lookup"><span data-stu-id="8c50d-493">An error occurred when accessing a system API.</span></span></exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission"><span data-ttu-id="8c50d-494">для записи категории счетчика производительности, если свойство <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> имеет значение <see langword="false" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-494">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span></span> <span data-ttu-id="8c50d-495">Связанное перечисление: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-495">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span></span></permission>
        <threadsafe><span data-ttu-id="8c50d-496">Этот метод является потокобезопасным.</span><span class="sxs-lookup"><span data-stu-id="8c50d-496">This method is thread safe.</span></span></threadsafe>
      </Docs>
    </Member>
    <Member MemberName="IncrementBy">
      <MemberSignature Language="C#" Value="public long IncrementBy (long value);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance int64 IncrementBy(int64 value) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.IncrementBy(System.Int64)" />
      <MemberSignature Language="VB.NET" Value="Public Function IncrementBy (value As Long) As Long" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; long IncrementBy(long value);" />
      <MemberSignature Language="F#" Value="member this.IncrementBy : int64 -&gt; int64" Usage="performanceCounter.IncrementBy value" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.Runtime.ConstrainedExecution.ReliabilityContract(System.Runtime.ConstrainedExecution.Consistency.WillNotCorruptState, System.Runtime.ConstrainedExecution.Cer.MayFail)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Int64</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="value" Type="System.Int64" />
      </Parameters>
      <Docs>
        <param name="value"><span data-ttu-id="8c50d-497">Увеличиваемое значение.</span><span class="sxs-lookup"><span data-stu-id="8c50d-497">The value to increment by.</span></span> <span data-ttu-id="8c50d-498">(Отрицательное значение уменьшает счетчик.)</span><span class="sxs-lookup"><span data-stu-id="8c50d-498">(A negative value decrements the counter.)</span></span></param>
        <summary><span data-ttu-id="8c50d-499">Увеличивает или уменьшает значение связанного счетчика производительности на заданное значение посредством эффективных атомарных операций.</span><span class="sxs-lookup"><span data-stu-id="8c50d-499">Increments or decrements the value of the associated performance counter by a specified amount through an efficient atomic operation.</span></span></summary>
        <returns><span data-ttu-id="8c50d-500">Новое значение счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-500">The new counter value.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-501">Можно записывать только в пользовательские счетчики.</span><span class="sxs-lookup"><span data-stu-id="8c50d-501">You can write only to custom counters.</span></span> <span data-ttu-id="8c50d-502">Все системные счетчики доступны только для чтения.</span><span class="sxs-lookup"><span data-stu-id="8c50d-502">All system counters are read-only.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-503">Методы <xref:System.Diagnostics.PerformanceCounter.Increment%2A>, <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>и <xref:System.Diagnostics.PerformanceCounter.Decrement%2A> используют взаимоблокировки для обновления значения счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-503">The <xref:System.Diagnostics.PerformanceCounter.Increment%2A>, <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>, and <xref:System.Diagnostics.PerformanceCounter.Decrement%2A> methods use interlocks to update the counter value.</span></span> <span data-ttu-id="8c50d-504">Это позволяет точно синхронизировать значение счетчика в многопоточных или многопроцессных сценариях, но также приводит к снижению производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-504">This helps keep the counter value accurate in multithreaded or multiprocess scenarios, but also results in a performance penalty.</span></span> <span data-ttu-id="8c50d-505">Если точность, предоставляемая блокируемыми операциями, не нужна, можно обновить свойство <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> напрямую в 5 раз, чтобы улучшить производительность.</span><span class="sxs-lookup"><span data-stu-id="8c50d-505">If you do not need the accuracy that interlocked operations provide, you can update the <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> property directly for up to a 5 times performance improvement.</span></span>  <span data-ttu-id="8c50d-506">Однако в многопоточных сценариях некоторые обновления значения счетчика могут игнорироваться, что приводит к неточности данных.</span><span class="sxs-lookup"><span data-stu-id="8c50d-506">However, in multithreaded scenarios, some updates to the counter value might be ignored, resulting in inaccurate data.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-507">Если значение свойства <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> и Категория счетчика производительности была создана с помощью .NET Framework версии 1,0 или 1,1, создается <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-507">If the value for the <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> property is <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> and the performance counter category was created with .NET Framework version 1.0 or 1.1, an <xref:System.InvalidOperationException> is thrown.</span></span> <span data-ttu-id="8c50d-508">Категории счетчиков производительности, созданные в более ранних версиях, используют глобальную общую память, а значение для <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> должно быть <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-508">Performance counter categories created with earlier versions use global shared memory, and the value for <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span> <span data-ttu-id="8c50d-509">Если категория не используется приложениями, работающими в версиях 1,0 или 1,1 .NET Framework, удалите категорию и создайте ее заново.</span><span class="sxs-lookup"><span data-stu-id="8c50d-509">If the category is not used by applications running on versions 1.0 or 1.1 of the .NET Framework, delete and recreate the category.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="8c50d-510">В следующем примере кода показано, как использовать метод <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A> для добавления приращений к счетчику.</span><span class="sxs-lookup"><span data-stu-id="8c50d-510">The following code example demonstrates how to use the <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A> method to add increments to a counter.</span></span> <span data-ttu-id="8c50d-511">Этот пример кода является частью более крупного примера для класса <xref:System.Diagnostics.PerformanceCounter>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-511">This code example is part of a larger example for the <xref:System.Diagnostics.PerformanceCounter> class.</span></span>  
  
 [!code-cpp[PerformanceCounterType.AverageCounter64#3](~/samples/snippets/cpp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CPP/averagecount32.cpp#3)]
 [!code-csharp[PerformanceCounterType.AverageCounter64#3](~/samples/snippets/csharp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CS/averagecount32.cs#3)]
 [!code-vb[PerformanceCounterType.AverageCounter64#3](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/VB/averagecount32.vb#3)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException"><span data-ttu-id="8c50d-512">Счетчик доступен только для чтения, поэтому приложение не может увеличить его значение.</span><span class="sxs-lookup"><span data-stu-id="8c50d-512">The counter is read-only, so the application cannot increment it.</span></span>  
  
<span data-ttu-id="8c50d-513">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-513">-or-</span></span> 
<span data-ttu-id="8c50d-514">Экземпляр класса, неправильно связанный со счетчиком производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-514">The instance is not correctly associated with a performance counter.</span></span>  
  
<span data-ttu-id="8c50d-515">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-515">-or-</span></span> 
<span data-ttu-id="8c50d-516">При использовании глобальной общей памяти свойству <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> присваивается значение <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-516">The <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> property is set to <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" /> when using global shared memory.</span></span></exception>
        <exception cref="T:System.ComponentModel.Win32Exception"><span data-ttu-id="8c50d-517">Произошла ошибка при обращении к API-интерфейсу системы.</span><span class="sxs-lookup"><span data-stu-id="8c50d-517">An error occurred when accessing a system API.</span></span></exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission"><span data-ttu-id="8c50d-518">для записи категории счетчика производительности, если свойство <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> имеет значение <see langword="false" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-518">for writing the performance counter category if the <see cref="P:System.Diagnostics.PerformanceCounter.ReadOnly" /> property is <see langword="false" />.</span></span> <span data-ttu-id="8c50d-519">Связанное перечисление: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-519">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span></span></permission>
        <threadsafe><span data-ttu-id="8c50d-520">Этот метод является потокобезопасным.</span><span class="sxs-lookup"><span data-stu-id="8c50d-520">This method is thread safe.</span></span></threadsafe>
      </Docs>
    </Member>
    <Member MemberName="InstanceLifetime">
      <MemberSignature Language="C#" Value="public System.Diagnostics.PerformanceCounterInstanceLifetime InstanceLifetime { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance valuetype System.Diagnostics.PerformanceCounterInstanceLifetime InstanceLifetime" />
      <MemberSignature Language="DocId" Value="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" />
      <MemberSignature Language="VB.NET" Value="Public Property InstanceLifetime As PerformanceCounterInstanceLifetime" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::Diagnostics::PerformanceCounterInstanceLifetime InstanceLifetime { System::Diagnostics::PerformanceCounterInstanceLifetime get(); void set(System::Diagnostics::PerformanceCounterInstanceLifetime value); };" />
      <MemberSignature Language="F#" Value="member this.InstanceLifetime : System.Diagnostics.PerformanceCounterInstanceLifetime with get, set" Usage="System.Diagnostics.PerformanceCounter.InstanceLifetime" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.DefaultValue(Mono.Cecil.CustomAttributeArgument)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="xamarinmac-3.0">
          <AttributeName>System.MonoTODO</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>get: System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Diagnostics.PerformanceCounterInstanceLifetime</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="8c50d-521">Получает или задает время существования процесса.</span><span class="sxs-lookup"><span data-stu-id="8c50d-521">Gets or sets the lifetime of a process.</span></span></summary>
        <value><span data-ttu-id="8c50d-522">Одно из значений перечисления <see cref="T:System.Diagnostics.PerformanceCounterInstanceLifetime" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-522">One of the <see cref="T:System.Diagnostics.PerformanceCounterInstanceLifetime" /> values.</span></span> <span data-ttu-id="8c50d-523">Значение по умолчанию — <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Global" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-523">The default is <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Global" />.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-524">Если категория счетчика производительности создается с .NET Framework версии 1,0 или 1,1, она использует глобальную общую память, а значение для <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> должно быть <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-524">If the performance counter category is created with the .NET Framework version 1.0 or 1.1, it uses global shared memory, and the value for <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span> <span data-ttu-id="8c50d-525">Если категория не используется приложениями, работающими в версиях 1,0 или 1,1 .NET Framework, удалите категорию и создайте ее заново.</span><span class="sxs-lookup"><span data-stu-id="8c50d-525">If the category is not used by applications running on versions 1.0 or 1.1 of the .NET Framework, delete and recreate the category.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-526">Если значение свойства <xref:System.Diagnostics.PerformanceCounter.CounterType%2A> равно <xref:System.Diagnostics.PerformanceCounterCategoryType.SingleInstance>, значение <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> для счетчика производительности должно быть <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-526">If the value of the <xref:System.Diagnostics.PerformanceCounter.CounterType%2A> property is <xref:System.Diagnostics.PerformanceCounterCategoryType.SingleInstance>, the <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> value for the performance counter must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentOutOfRangeException"><span data-ttu-id="8c50d-527">Присвоенное значение не является членом перечисления <see cref="T:System.Diagnostics.PerformanceCounterInstanceLifetime" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-527">The value set is not a member of the <see cref="T:System.Diagnostics.PerformanceCounterInstanceLifetime" /> enumeration.</span></span></exception>
        <exception cref="T:System.InvalidOperationException"><span data-ttu-id="8c50d-528"><see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> задается после инициализации <see cref="T:System.Diagnostics.PerformanceCounter" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-528"><see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> is set after the <see cref="T:System.Diagnostics.PerformanceCounter" /> has been initialized.</span></span></exception>
      </Docs>
    </Member>
    <Member MemberName="InstanceName">
      <MemberSignature Language="C#" Value="public string InstanceName { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string InstanceName" />
      <MemberSignature Language="DocId" Value="P:System.Diagnostics.PerformanceCounter.InstanceName" />
      <MemberSignature Language="VB.NET" Value="Public Property InstanceName As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ InstanceName { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.InstanceName : string with get, set" Usage="System.Diagnostics.PerformanceCounter.InstanceName" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.DefaultValue("")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.ReadOnly(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.RecommendedAsConfigurable(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.TypeConverter("System.Diagnostics.Design.InstanceNameConverter, System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1">
          <AttributeName>System.ComponentModel.TypeConverter("System.Diagnostics.Design.InstanceNameConverter, System.Design, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5">
          <AttributeName>System.ComponentModel.TypeConverter("System.Diagnostics.Design.InstanceNameConverter, System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.ComponentModel.SettingsBindable(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>get: System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="8c50d-529">Получает или задает имя экземпляра для этого счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-529">Gets or sets an instance name for this performance counter.</span></span></summary>
        <value><span data-ttu-id="8c50d-530">Имя экземпляра категории счетчика производительности или пустая строка (""), если счетчик является единственным экземпляром.</span><span class="sxs-lookup"><span data-stu-id="8c50d-530">The name of the performance counter category instance, or an empty string (""), if the counter is a single-instance counter.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-531">Длина имен экземпляров должна быть короче 128 символов.</span><span class="sxs-lookup"><span data-stu-id="8c50d-531">Instance names must be shorter than 128 characters in length.</span></span>  
  
 <span data-ttu-id="8c50d-532">В некоторых ситуациях категории делятся на экземпляры, которые отправляют данные о нескольких экземплярах объекта, к которому относится Категория.</span><span class="sxs-lookup"><span data-stu-id="8c50d-532">In some situations, categories are subdivided into instances, which track data about multiple occurrences of the object that a category relates to.</span></span> <span data-ttu-id="8c50d-533">Экземпляры применяются к категории в целом, а не к отдельным счетчикам.</span><span class="sxs-lookup"><span data-stu-id="8c50d-533">Instances apply to the category as whole, rather than to individual counters.</span></span> <span data-ttu-id="8c50d-534">Каждый счетчик в категории имеет каждый экземпляр, определенный для категории.</span><span class="sxs-lookup"><span data-stu-id="8c50d-534">Every counter within a category has each instance defined for the category.</span></span> <span data-ttu-id="8c50d-535">Например, Категория процесса содержит экземпляры с именами Idle и System.</span><span class="sxs-lookup"><span data-stu-id="8c50d-535">For example, the Process category contains instances named Idle and System.</span></span> <span data-ttu-id="8c50d-536">Таким же, каждый счетчик в категории процесса содержит данные для каждого экземпляра, отображая сведения о процессах простоя или системных процессах.</span><span class="sxs-lookup"><span data-stu-id="8c50d-536">Every counter within the Process category thus contains data for each instance, showing information about either idle processes or system processes.</span></span>  
  
 <span data-ttu-id="8c50d-537">Многие категории не содержат несколько экземпляров, поэтому можно оставить это свойство пустым, чтобы указать, что ни один экземпляр не связан с категорией.</span><span class="sxs-lookup"><span data-stu-id="8c50d-537">Many categories do not contain multiple instances, so you can leave this property empty to indicate that no instance is associated with the category.</span></span>  
  
 <span data-ttu-id="8c50d-538">Если этот <xref:System.Diagnostics.PerformanceCounter> экземпляр указывает на непользовательскую категорию, можно выбрать только существующие экземпляры категории.</span><span class="sxs-lookup"><span data-stu-id="8c50d-538">If this <xref:System.Diagnostics.PerformanceCounter> instance points to a noncustom category, you can choose from only the existing category instances.</span></span> <span data-ttu-id="8c50d-539">Новые экземпляры категорий можно создавать только в пользовательских категориях, которые позволяют определить столько счетчиков и экземпляров категорий, сколько необходимо.</span><span class="sxs-lookup"><span data-stu-id="8c50d-539">You can create new category instances only in custom categories, which allow you to define as many counters and category instances as you need.</span></span>  
  
 <span data-ttu-id="8c50d-540">Чтобы создать экземпляр категории производительности, укажите `instanceName` в конструкторе <xref:System.Diagnostics.PerformanceCounter.%23ctor%2A>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-540">To create a performance category instance, specify an `instanceName` on the <xref:System.Diagnostics.PerformanceCounter.%23ctor%2A> constructor.</span></span> <span data-ttu-id="8c50d-541">Если экземпляр категории, заданный с помощью `instanceName`, уже существует, новый объект будет ссылаться на существующий экземпляр категории.</span><span class="sxs-lookup"><span data-stu-id="8c50d-541">If the category instance specified by `instanceName` already exists the new object will reference the existing category instance.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-542">Не используйте символы "(", ")", "#", "\\" или "/" в имени экземпляра.</span><span class="sxs-lookup"><span data-stu-id="8c50d-542">Do not use the characters "(", ")", "#", "\\", or "/" in the instance name.</span></span> <span data-ttu-id="8c50d-543">Если используется любой из этих символов, то консоль производительности (см. раздел [Профилирование среды выполнения](~/docs/framework/debug-trace-profile/runtime-profiling.md)) может неправильно отображать значения экземпляра.</span><span class="sxs-lookup"><span data-stu-id="8c50d-543">If any of these characters are used, the Performance Console (see [Runtime Profiling](~/docs/framework/debug-trace-profile/runtime-profiling.md)) may not correctly display the instance values.</span></span>  
  
 <span data-ttu-id="8c50d-544">Если имя экземпляра создается автоматически и может содержать символы "(", ")", "#", "\\" или "/", используйте сопоставление символов в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="8c50d-544">If the instance name is automatically generated and might contain the characters "(", ")", "#", "\\", or "/", use the character mapping in the following table.</span></span>  
  
|<span data-ttu-id="8c50d-545">Знак</span><span class="sxs-lookup"><span data-stu-id="8c50d-545">Character</span></span>|<span data-ttu-id="8c50d-546">Сопоставленный символ</span><span class="sxs-lookup"><span data-stu-id="8c50d-546">Mapped character</span></span>|  
|---------------|----------------------|  
|<span data-ttu-id="8c50d-547">(</span><span class="sxs-lookup"><span data-stu-id="8c50d-547">(</span></span>|<span data-ttu-id="8c50d-548">[</span><span class="sxs-lookup"><span data-stu-id="8c50d-548">[</span></span>|  
|<span data-ttu-id="8c50d-549">)</span><span class="sxs-lookup"><span data-stu-id="8c50d-549">)</span></span>|<span data-ttu-id="8c50d-550">]</span><span class="sxs-lookup"><span data-stu-id="8c50d-550">]</span></span>|  
|#|<span data-ttu-id="8c50d-551">_</span><span class="sxs-lookup"><span data-stu-id="8c50d-551">_</span></span>|  
|<span data-ttu-id="8c50d-552">\|_</span><span class="sxs-lookup"><span data-stu-id="8c50d-552">\|_</span></span>|  
|/|<span data-ttu-id="8c50d-553">_</span><span class="sxs-lookup"><span data-stu-id="8c50d-553">_</span></span>|  
  
 <span data-ttu-id="8c50d-554">Свойство <xref:System.AppDomain.FriendlyName%2A> объекта <xref:System.AppDomain>, полученное из свойства <xref:System.AppDomain.CurrentDomain%2A?displayProperty=nameWithType>, является общим источником имен экземпляров, которые могут содержать недопустимые символы.</span><span class="sxs-lookup"><span data-stu-id="8c50d-554">The <xref:System.AppDomain.FriendlyName%2A> property of the <xref:System.AppDomain> object obtained from the <xref:System.AppDomain.CurrentDomain%2A?displayProperty=nameWithType> property is a common source of instance names that can contain invalid characters.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="8c50d-555">В следующем примере кода создается экземпляр класса <xref:System.Diagnostics.PerformanceCounter> по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="8c50d-555">The following code example creates a default instance of the <xref:System.Diagnostics.PerformanceCounter> class.</span></span> <span data-ttu-id="8c50d-556">После создания экземпляра задаются значения свойств <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>и <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A>, а также отображаются результаты вызова метода <xref:System.Diagnostics.PerformanceCounter.NextValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-556">After the instance is created, the <xref:System.Diagnostics.PerformanceCounter.CategoryName%2A>, <xref:System.Diagnostics.PerformanceCounter.CounterName%2A>, and <xref:System.Diagnostics.PerformanceCounter.InstanceName%2A> property values are set, and the results of a call to the <xref:System.Diagnostics.PerformanceCounter.NextValue%2A> method are displayed.</span></span>  
  
 [!code-cpp[PerfCounter#1](~/samples/snippets/cpp/VS_Snippets_CLR/PerfCounter/CPP/perfcounter.cpp#1)]
 [!code-csharp[PerfCounter#1](~/samples/snippets/csharp/VS_Snippets_CLR/PerfCounter/CS/perfcounter.cs#1)]
 [!code-vb[PerfCounter#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerfCounter/VB/perfcounter.vb#1)]  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="MachineName">
      <MemberSignature Language="C#" Value="public string MachineName { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string MachineName" />
      <MemberSignature Language="DocId" Value="P:System.Diagnostics.PerformanceCounter.MachineName" />
      <MemberSignature Language="VB.NET" Value="Public Property MachineName As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ MachineName { System::String ^ get(); void set(System::String ^ value); };" />
      <MemberSignature Language="F#" Value="member this.MachineName : string with get, set" Usage="System.Diagnostics.PerformanceCounter.MachineName" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.Browsable(false)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.DefaultValue(".")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;xamarinmac-3.0">
          <AttributeName>System.ComponentModel.RecommendedAsConfigurable(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="xamarinmac-3.0">
          <AttributeName>System.MonoTODO("What's the machine name format?")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.ComponentModel.SettingsBindable(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>get: System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="8c50d-557">Возвращает или задает имя компьютера для этого счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-557">Gets or sets the computer name for this performance counter.</span></span></summary>
        <value><span data-ttu-id="8c50d-558">Сервер, на котором постоянно находятся счетчик производительности и связанная с ним категория.</span><span class="sxs-lookup"><span data-stu-id="8c50d-558">The server on which the performance counter and its associated category reside.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-559">Значения можно записывать только в счетчики, которые находятся на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-559">You can write values only to counters that reside on the local computer.</span></span> <span data-ttu-id="8c50d-560">Однако можно считывать значения счетчиков с любого компьютера предприятия, для которого у вас есть права доступа.</span><span class="sxs-lookup"><span data-stu-id="8c50d-560">However, you can read counter values from any computer in the enterprise for which you have access privileges.</span></span>  
  
 <span data-ttu-id="8c50d-561">При установке свойства <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> для указания на удаленный компьютер экземпляр <xref:System.Diagnostics.PerformanceCounter> пытается открыть счетчик на этом компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c50d-561">When you set the <xref:System.Diagnostics.PerformanceCounter.MachineName%2A> property to point to a remote computer, the <xref:System.Diagnostics.PerformanceCounter> instance attempts to open the counter on that computer.</span></span> <span data-ttu-id="8c50d-562">Если счетчик не существует, задание этого свойства вызывает исключение.</span><span class="sxs-lookup"><span data-stu-id="8c50d-562">If the counter does not exist, setting this property throws an exception.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentException"><span data-ttu-id="8c50d-563">Недопустимый формат <see cref="P:System.Diagnostics.PerformanceCounter.MachineName" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-563">The <see cref="P:System.Diagnostics.PerformanceCounter.MachineName" /> format is invalid.</span></span></exception>
      </Docs>
    </Member>
    <Member MemberName="NextSample">
      <MemberSignature Language="C#" Value="public System.Diagnostics.CounterSample NextSample ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance valuetype System.Diagnostics.CounterSample NextSample() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.NextSample" />
      <MemberSignature Language="VB.NET" Value="Public Function NextSample () As CounterSample" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; System::Diagnostics::CounterSample NextSample();" />
      <MemberSignature Language="F#" Value="member this.NextSample : unit -&gt; System.Diagnostics.CounterSample" Usage="performanceCounter.NextSample " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Diagnostics.CounterSample</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="8c50d-564">Получает образец счетчика и возвращает начальное или не рассчитанное значение для него.</span><span class="sxs-lookup"><span data-stu-id="8c50d-564">Obtains a counter sample, and returns the raw, or uncalculated, value for it.</span></span></summary>
        <returns><span data-ttu-id="8c50d-565">Тип <see cref="T:System.Diagnostics.CounterSample" />, представляющий следующее начальное значение, которое система получает для этого счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-565">A <see cref="T:System.Diagnostics.CounterSample" /> that represents the next raw value that the system obtains for this counter.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-566">Этот метод обычно используется для счетчиков, содержащих невычисленные значения.</span><span class="sxs-lookup"><span data-stu-id="8c50d-566">This method is generally used for counters that contain uncalculated values.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-567">Если значение свойства <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> и Категория счетчика производительности была создана с помощью .NET Framework версии 1,0 или 1,1, создается <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-567">If the value for the <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> property is <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> and the performance counter category was created with .NET Framework version 1.0 or 1.1, an <xref:System.InvalidOperationException> is thrown.</span></span> <span data-ttu-id="8c50d-568">Категории счетчиков производительности, созданные в более ранних версиях, используют глобальную общую память, а значение для <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> должно быть <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-568">Performance counter categories created with earlier versions use global shared memory, and the value for <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span> <span data-ttu-id="8c50d-569">Если категория не используется приложениями, работающими в версиях 1,0 или 1,1 .NET Framework, удалите категорию и создайте ее заново.</span><span class="sxs-lookup"><span data-stu-id="8c50d-569">If the category is not used by applications running on versions 1.0 or 1.1 of the .NET Framework, delete and recreate the category.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-570">Для чтения счетчиков производительности в Windows Vista, Windows XP Professional x64 Edition или Windows Server 2003 необходимо быть членом группы "Пользователи системного монитора" или обладать правами администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-570">To read performance counters in Windows Vista, Windows XP Professional x64 Edition, or Windows Server 2003, you must either be a member of the Performance Monitor Users group or have administrative privileges.</span></span>  
>   
>  <span data-ttu-id="8c50d-571">Чтобы не допустить повышения привилегий для доступа к счетчикам производительности в Windows Vista, добавьте себя в группу Пользователи системного монитора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-571">To avoid having to elevate your privileges to access performance counters in Windows Vista, add yourself to the Performance Monitor Users group.</span></span>  
>   
>  <span data-ttu-id="8c50d-572">В Windows Vista привилегии пользователя определяются контролем учетных записей (UAC).</span><span class="sxs-lookup"><span data-stu-id="8c50d-572">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="8c50d-573">Члену встроенной группы "Администраторы" присваивается два маркера доступа на время выполнения: маркер доступа обычного пользователя и маркер доступа администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-573">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="8c50d-574">По умолчанию назначена роль обычного пользователя.</span><span class="sxs-lookup"><span data-stu-id="8c50d-574">By default, you are in the standard user role.</span></span> <span data-ttu-id="8c50d-575">Чтобы выполнить код, обращающийся к счетчикам производительности, необходимо сначала повысить привилегии обычного пользователя до администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-575">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="8c50d-576">Это можно сделать при запуске приложения, , щелкнув значок приложения правой кнопкой мыши и указав, что приложение должно запускаться от имени администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-576">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="8c50d-577">В следующем примере кода показано, как использовать метод <xref:System.Diagnostics.PerformanceCounter.NextSample%2A> для получения следующего невычисленного значения счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-577">The following code example demonstrates how to use the <xref:System.Diagnostics.PerformanceCounter.NextSample%2A> method to obtain the next uncalculated value of a counter.</span></span> <span data-ttu-id="8c50d-578">Этот пример кода является частью более крупного примера для класса <xref:System.Diagnostics.PerformanceCounter>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-578">This code example is part of a larger example for the <xref:System.Diagnostics.PerformanceCounter> class.</span></span>  
  
 [!code-cpp[PerformanceCounterType.AverageCounter64#3](~/samples/snippets/cpp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CPP/averagecount32.cpp#3)]
 [!code-csharp[PerformanceCounterType.AverageCounter64#3](~/samples/snippets/csharp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CS/averagecount32.cs#3)]
 [!code-vb[PerformanceCounterType.AverageCounter64#3](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/VB/averagecount32.vb#3)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException"><span data-ttu-id="8c50d-579">Экземпляр класса, неправильно связанный со счетчиком производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-579">The instance is not correctly associated with a performance counter.</span></span>  
  
<span data-ttu-id="8c50d-580">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-580">-or-</span></span> 
<span data-ttu-id="8c50d-581">При использовании глобальной общей памяти свойству <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> присваивается значение <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-581">The <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> property is set to <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" /> when using global shared memory.</span></span></exception>
        <exception cref="T:System.ComponentModel.Win32Exception"><span data-ttu-id="8c50d-582">Произошла ошибка при обращении к API-интерфейсу системы.</span><span class="sxs-lookup"><span data-stu-id="8c50d-582">An error occurred when accessing a system API.</span></span></exception>
        <exception cref="T:System.UnauthorizedAccessException"><span data-ttu-id="8c50d-583">Код, выполняющийся без привилегий администратора, предпринял попытку считывания значения счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-583">Code that is executing without administrative privileges attempted to read a performance counter.</span></span></exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission"><span data-ttu-id="8c50d-584">для чтения категории счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-584">for reading the performance counter category.</span></span> <span data-ttu-id="8c50d-585">Связанное перечисление: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-585">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />.</span></span></permission>
      </Docs>
    </Member>
    <Member MemberName="NextValue">
      <MemberSignature Language="C#" Value="public float NextValue ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance float32 NextValue() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.NextValue" />
      <MemberSignature Language="VB.NET" Value="Public Function NextValue () As Single" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; float NextValue();" />
      <MemberSignature Language="F#" Value="member this.NextValue : unit -&gt; single" Usage="performanceCounter.NextValue " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Single</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="8c50d-586">Получает образец счетчика и возвращает расчетное значение для него.</span><span class="sxs-lookup"><span data-stu-id="8c50d-586">Obtains a counter sample and returns the calculated value for it.</span></span></summary>
        <returns><span data-ttu-id="8c50d-587">Следующее расчетное значение, получаемое системой для этого счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-587">The next calculated value that the system obtains for this counter.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-588">Если вычисленное значение счетчика зависит от двух операций чтения счетчика, то первая операция считывания возвращает 0,0.</span><span class="sxs-lookup"><span data-stu-id="8c50d-588">If the calculated value of a counter depends on two counter reads, the first read operation returns 0.0.</span></span> <span data-ttu-id="8c50d-589">Сброс свойств счетчика производительности для указания другого счетчика эквивалентен созданию нового счетчика производительности, а первая операция чтения с новыми свойствами возвращает 0,0.</span><span class="sxs-lookup"><span data-stu-id="8c50d-589">Resetting the performance counter properties to specify a different counter is equivalent to creating a new performance counter, and the first read operation using the new properties returns 0.0.</span></span> <span data-ttu-id="8c50d-590">Рекомендуемое время задержки между вызовами метода <xref:System.Diagnostics.PerformanceCounter.NextValue%2A> — одна секунда, позволяющая счетчику выполнить следующее добавочное чтение.</span><span class="sxs-lookup"><span data-stu-id="8c50d-590">The recommended delay time between calls to the <xref:System.Diagnostics.PerformanceCounter.NextValue%2A> method is one second, to allow the counter to perform the next incremental read.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-591">Для чтения счетчиков производительности необходимы права администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-591">To read performance counters, you must have administrative privileges.</span></span> <span data-ttu-id="8c50d-592">В Windows Vista привилегии пользователя определяются контролем учетных записей (UAC).</span><span class="sxs-lookup"><span data-stu-id="8c50d-592">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="8c50d-593">Члену встроенной группы "Администраторы" присваивается два маркера доступа на время выполнения: маркер доступа обычного пользователя и маркер доступа администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-593">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="8c50d-594">По умолчанию назначена роль обычного пользователя.</span><span class="sxs-lookup"><span data-stu-id="8c50d-594">By default, you are in the standard user role.</span></span> <span data-ttu-id="8c50d-595">Чтобы выполнить код, обращающийся к счетчикам производительности, необходимо сначала повысить привилегии обычного пользователя до администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-595">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="8c50d-596">Это можно сделать при запуске приложения, , щелкнув значок приложения правой кнопкой мыши и указав, что приложение должно запускаться от имени администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-596">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="8c50d-597">В следующем примере кода создается счетчик <xref:System.Diagnostics.PerformanceCounterType.ElapsedTime> и используется метод <xref:System.Diagnostics.PerformanceCounter.NextValue%2A> для вывода значений счетчика за период времени.</span><span class="sxs-lookup"><span data-stu-id="8c50d-597">The following code example creates an <xref:System.Diagnostics.PerformanceCounterType.ElapsedTime> counter and uses the <xref:System.Diagnostics.PerformanceCounter.NextValue%2A> method to display the counter's values over a time period.</span></span>  
  
 [!code-cpp[PerformanceCounterType.ElapsedTime#2](~/samples/snippets/cpp/VS_Snippets_CLR/PerformanceCounterType.ElapsedTime/CPP/elapsedtime.cpp#2)]
 [!code-csharp[PerformanceCounterType.ElapsedTime#2](~/samples/snippets/csharp/VS_Snippets_CLR/PerformanceCounterType.ElapsedTime/CS/elapsedtime.cs#2)]
 [!code-vb[PerformanceCounterType.ElapsedTime#2](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerformanceCounterType.ElapsedTime/VB/elapsedtime.vb#2)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException"><span data-ttu-id="8c50d-598">Экземпляр класса, неправильно связанный со счетчиком производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-598">The instance is not correctly associated with a performance counter.</span></span></exception>
        <exception cref="T:System.ComponentModel.Win32Exception"><span data-ttu-id="8c50d-599">Произошла ошибка при обращении к API-интерфейсу системы.</span><span class="sxs-lookup"><span data-stu-id="8c50d-599">An error occurred when accessing a system API.</span></span></exception>
        <exception cref="T:System.UnauthorizedAccessException"><span data-ttu-id="8c50d-600">Код, выполняющийся без привилегий администратора, предпринял попытку считывания значения счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-600">Code that is executing without administrative privileges attempted to read a performance counter.</span></span></exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission"><span data-ttu-id="8c50d-601">для чтения категории счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-601">for reading the performance counter category.</span></span> <span data-ttu-id="8c50d-602">Связанное перечисление: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-602">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Read" />.</span></span></permission>
      </Docs>
    </Member>
    <Member MemberName="RawValue">
      <MemberSignature Language="C#" Value="public long RawValue { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance int64 RawValue" />
      <MemberSignature Language="DocId" Value="P:System.Diagnostics.PerformanceCounter.RawValue" />
      <MemberSignature Language="VB.NET" Value="Public Property RawValue As Long" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property long RawValue { long get(); void set(long value); };" />
      <MemberSignature Language="F#" Value="member this.RawValue : int64 with get, set" Usage="System.Diagnostics.PerformanceCounter.RawValue" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.Browsable(false)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.DesignerSerializationVisibility(System.ComponentModel.DesignerSerializationVisibility.Hidden)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="xamarinmac-3.0">
          <AttributeName>System.Diagnostics.MonitoringDescription("The raw value of the counter.")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.Diagnostics.MonitoringDescription("PC_RawValue")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Int64</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="8c50d-603">Получает или задает начальное или не рассчитанное значение этого счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-603">Gets or sets the raw, or uncalculated, value of this counter.</span></span></summary>
        <value><span data-ttu-id="8c50d-604">Начальное значение счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-604">The raw value of the counter.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-605">Если тип счетчика имеет размер 32 бит и вы пытаетесь задать для этого свойства слишком большое значение, свойство усекает значение до 32 бит.</span><span class="sxs-lookup"><span data-stu-id="8c50d-605">If the counter type is a 32-bit size and you attempt to set this property to a value that is too large to fit, the property truncates the value to 32 bits.</span></span> <span data-ttu-id="8c50d-606">При чтении пользовательских счетчиков на локальном компьютере использование свойства <xref:System.Diagnostics.PerformanceCounter.RawValue%2A>, а не вычисляемого значения, может значительно повысить производительность в сценариях, где необработанное значение достаточно.</span><span class="sxs-lookup"><span data-stu-id="8c50d-606">When reading custom counters on the local computer, using the <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> property rather than a calculated value can produce significantly better performance in scenarios where the raw value is sufficient.</span></span>  
  
 <span data-ttu-id="8c50d-607">Если показания счетчика доступны только для чтения, то получение свойства <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> выбирает счетчик во время вызова свойства.</span><span class="sxs-lookup"><span data-stu-id="8c50d-607">If the counter that you are reading is read-only, getting the <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> property samples the counter at the time that the property is called.</span></span> <span data-ttu-id="8c50d-608">Это действие эквивалентно выполнению начального вызова метода <xref:System.Diagnostics.PerformanceCounter.NextSample%2A>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-608">This action is equivalent to making an initial call to the <xref:System.Diagnostics.PerformanceCounter.NextSample%2A> method.</span></span> <span data-ttu-id="8c50d-609">При последующем вызове <xref:System.Diagnostics.PerformanceCounter.NextSample%2A>можно выполнять вычисления для значений, возвращаемых обоими вызовами.</span><span class="sxs-lookup"><span data-stu-id="8c50d-609">If you subsequently call <xref:System.Diagnostics.PerformanceCounter.NextSample%2A>, you can perform calculations on the values that both calls returned.</span></span>  
  
 <span data-ttu-id="8c50d-610">Поскольку системные счетчики доступны только для чтения, можно получить, но не задавать их необработанные значения.</span><span class="sxs-lookup"><span data-stu-id="8c50d-610">Because system counters are read-only, you can get but not set their raw values.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-611">Методы <xref:System.Diagnostics.PerformanceCounter.Increment%2A>, <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>и <xref:System.Diagnostics.PerformanceCounter.Decrement%2A> используют взаимоблокировки для обновления значения счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-611">The <xref:System.Diagnostics.PerformanceCounter.Increment%2A>, <xref:System.Diagnostics.PerformanceCounter.IncrementBy%2A>, and <xref:System.Diagnostics.PerformanceCounter.Decrement%2A> methods use interlocks to update the counter value.</span></span> <span data-ttu-id="8c50d-612">Это позволяет точно синхронизировать значение счетчика в многопоточных или многопроцессных сценариях, но также приводит к снижению производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-612">This helps keep the counter value accurate in multithreaded or multiprocess scenarios, but also results in a performance penalty.</span></span> <span data-ttu-id="8c50d-613">Если точность, предоставляемая блокируемыми операциями, не нужна, можно обновить свойство <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> напрямую в 5 раз, чтобы улучшить производительность.</span><span class="sxs-lookup"><span data-stu-id="8c50d-613">If you do not need the accuracy that interlocked operations provide, you can update the <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> property directly for up to a 5 times performance improvement.</span></span>  <span data-ttu-id="8c50d-614">Однако в многопоточных сценариях некоторые обновления значения счетчика могут игнорироваться, что приводит к неточности данных.</span><span class="sxs-lookup"><span data-stu-id="8c50d-614">However, in multithreaded scenarios, some updates to the counter value might be ignored, resulting in inaccurate data.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-615">Если значение свойства <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> и Категория счетчика производительности была создана с помощью .NET Framework версии 1,0 или 1,1, создается <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-615">If the value for the <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> property is <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> and the performance counter category was created with .NET Framework version 1.0 or 1.1, an <xref:System.InvalidOperationException> is thrown.</span></span> <span data-ttu-id="8c50d-616">Категории счетчиков производительности, созданные в более ранних версиях, используют глобальную общую память, а значение для <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> должно быть <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-616">Performance counter categories created with earlier versions use global shared memory, and the value for <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span> <span data-ttu-id="8c50d-617">Если категория не используется приложениями, работающими в версиях 1,0 или 1,1 .NET Framework, удалите категорию и создайте ее заново.</span><span class="sxs-lookup"><span data-stu-id="8c50d-617">If the category is not used by applications running on versions 1.0 or 1.1 of the .NET Framework, delete and recreate the category.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-618">Для чтения счетчиков производительности в Windows Vista, Windows XP Professional x64 Edition или Windows Server 2003 необходимо быть членом группы "Пользователи системного монитора" или обладать правами администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-618">To read performance counters in Windows Vista, Windows XP Professional x64 Edition, or Windows Server 2003, you must either be a member of the Performance Monitor Users group or have administrative privileges.</span></span>  
>   
>  <span data-ttu-id="8c50d-619">Чтобы не допустить повышения привилегий для доступа к счетчикам производительности в Windows Vista, добавьте себя в группу Пользователи системного монитора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-619">To avoid having to elevate your privileges to access performance counters in Windows Vista, add yourself to the Performance Monitor Users group.</span></span>  
>   
>  <span data-ttu-id="8c50d-620">В Windows Vista привилегии пользователя определяются контролем учетных записей (UAC).</span><span class="sxs-lookup"><span data-stu-id="8c50d-620">In Windows Vista, User Account Control (UAC) determines the privileges of a user.</span></span> <span data-ttu-id="8c50d-621">Члену встроенной группы "Администраторы" присваивается два маркера доступа на время выполнения: маркер доступа обычного пользователя и маркер доступа администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-621">If you are a member of the Built-in Administrators group, you are assigned two run-time access tokens: a standard user access token and an administrator access token.</span></span> <span data-ttu-id="8c50d-622">По умолчанию назначена роль обычного пользователя.</span><span class="sxs-lookup"><span data-stu-id="8c50d-622">By default, you are in the standard user role.</span></span> <span data-ttu-id="8c50d-623">Чтобы выполнить код, обращающийся к счетчикам производительности, необходимо сначала повысить привилегии обычного пользователя до администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-623">To execute the code that accesses performance counters, you must first elevate your privileges from standard user to administrator.</span></span> <span data-ttu-id="8c50d-624">Это можно сделать при запуске приложения, , щелкнув значок приложения правой кнопкой мыши и указав, что приложение должно запускаться от имени администратора.</span><span class="sxs-lookup"><span data-stu-id="8c50d-624">You can do this when you start an application by right-clicking the application icon and indicating that you want to run as an administrator.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="8c50d-625">В следующем примере класс <xref:System.Diagnostics.CounterSample> используется для вывода значения свойства <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> для счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-625">The following example uses the <xref:System.Diagnostics.CounterSample> class to display the value of the <xref:System.Diagnostics.PerformanceCounter.RawValue%2A> property for a counter.</span></span>  
  
 [!code-cpp[PerformanceCounterType.AverageCounter64#1](~/samples/snippets/cpp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CPP/averagecount32.cpp#1)]
 [!code-csharp[PerformanceCounterType.AverageCounter64#1](~/samples/snippets/csharp/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/CS/averagecount32.cs#1)]
 [!code-vb[PerformanceCounterType.AverageCounter64#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/PerformanceCounterType.AverageCounter64/VB/averagecount32.vb#1)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException"><span data-ttu-id="8c50d-626">Попытка установить начальное значение счетчика, но счетчик доступен только для чтения.</span><span class="sxs-lookup"><span data-stu-id="8c50d-626">You are trying to set the counter's raw value, but the counter is read-only.</span></span>  
  
<span data-ttu-id="8c50d-627">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-627">-or-</span></span> 
<span data-ttu-id="8c50d-628">Экземпляр класса, неправильно связанный со счетчиком производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-628">The instance is not correctly associated with a performance counter.</span></span>  
  
<span data-ttu-id="8c50d-629">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-629">-or-</span></span> 
<span data-ttu-id="8c50d-630">При использовании глобальной общей памяти свойству <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> присваивается значение <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-630">The <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> property is set to <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" /> when using global shared memory.</span></span></exception>
        <exception cref="T:System.ComponentModel.Win32Exception"><span data-ttu-id="8c50d-631">Произошла ошибка при обращении к API-интерфейсу системы.</span><span class="sxs-lookup"><span data-stu-id="8c50d-631">An error occurred when accessing a system API.</span></span></exception>
        <exception cref="T:System.UnauthorizedAccessException"><span data-ttu-id="8c50d-632">Код, выполняющийся без привилегий администратора, предпринял попытку считывания значения счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-632">Code that is executing without administrative privileges attempted to read a performance counter.</span></span></exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission"><span data-ttu-id="8c50d-633">для записи категории счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-633">for writing the performance counter category.</span></span> <span data-ttu-id="8c50d-634">Связанное перечисление: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-634">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span></span></permission>
      </Docs>
    </Member>
    <Member MemberName="ReadOnly">
      <MemberSignature Language="C#" Value="public bool ReadOnly { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance bool ReadOnly" />
      <MemberSignature Language="DocId" Value="P:System.Diagnostics.PerformanceCounter.ReadOnly" />
      <MemberSignature Language="VB.NET" Value="Public Property ReadOnly As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property bool ReadOnly { bool get(); void set(bool value); };" />
      <MemberSignature Language="F#" Value="member this.ReadOnly : bool with get, set" Usage="System.Diagnostics.PerformanceCounter.ReadOnly" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.Browsable(false)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.ComponentModel.DefaultValue(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="xamarinmac-3.0">
          <AttributeName>System.Diagnostics.MonitoringDescription("The accessability level of the counter.")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-1.1;netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.Diagnostics.MonitoringDescription("PC_ReadOnly")</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.0">
          <AttributeName>get: System.Runtime.TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="8c50d-635">Получает или задает значение, определяющее, доступен ли экземпляр <see cref="T:System.Diagnostics.PerformanceCounter" /> только для чтения.</span><span class="sxs-lookup"><span data-stu-id="8c50d-635">Gets or sets a value indicating whether this <see cref="T:System.Diagnostics.PerformanceCounter" /> instance is in read-only mode.</span></span></summary>
        <value><span data-ttu-id="8c50d-636">Значение <see langword="true" />, если экземпляр <see cref="T:System.Diagnostics.PerformanceCounter" /> доступен только для чтения (даже если сам счетчик является определенным счетчиком .NET Framework); значение <see langword="false" />, если счетчик работает в режиме чтения/записи.</span><span class="sxs-lookup"><span data-stu-id="8c50d-636"><see langword="true" />, if the <see cref="T:System.Diagnostics.PerformanceCounter" /> instance is in read-only mode (even if the counter itself is a custom .NET Framework counter); <see langword="false" /> if it is in read/write mode.</span></span> <span data-ttu-id="8c50d-637">Значение по умолчанию — значение, заданное конструктором.</span><span class="sxs-lookup"><span data-stu-id="8c50d-637">The default is the value set by the constructor.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-638">Для системного счетчика <xref:System.Diagnostics.PerformanceCounter.ReadOnly%2A> всегда должна `true`.</span><span class="sxs-lookup"><span data-stu-id="8c50d-638">For a system counter, <xref:System.Diagnostics.PerformanceCounter.ReadOnly%2A> should always `true`.</span></span> <span data-ttu-id="8c50d-639">Запись в системный счетчик невозможна.</span><span class="sxs-lookup"><span data-stu-id="8c50d-639">You cannot write to a system counter.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="RemoveInstance">
      <MemberSignature Language="C#" Value="public void RemoveInstance ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance void RemoveInstance() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Diagnostics.PerformanceCounter.RemoveInstance" />
      <MemberSignature Language="VB.NET" Value="Public Sub RemoveInstance ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; void RemoveInstance();" />
      <MemberSignature Language="F#" Value="member this.RemoveInstance : unit -&gt; unit" Usage="performanceCounter.RemoveInstance " />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System</AssemblyName>
        <AssemblyVersion>1.0.5000.0</AssemblyVersion>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Diagnostics.PerformanceCounter</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="xamarinmac-3.0">
          <AttributeName>System.MonoTODO</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5;netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;xamarinmac-3.0;netframework-4.8">
          <AttributeName>System.Runtime.ConstrainedExecution.ReliabilityContract(System.Runtime.ConstrainedExecution.Consistency.WillNotCorruptState, System.Runtime.ConstrainedExecution.Cer.MayFail)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="8c50d-640">Удаляет экземпляр категории, указанной объектом <see cref="T:System.Diagnostics.PerformanceCounter" /> свойства <see cref="P:System.Diagnostics.PerformanceCounter.InstanceName" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-640">Deletes the category instance specified by the <see cref="T:System.Diagnostics.PerformanceCounter" /> object <see cref="P:System.Diagnostics.PerformanceCounter.InstanceName" /> property.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="8c50d-641">Экземпляр можно удалить только для настраиваемого счетчика.</span><span class="sxs-lookup"><span data-stu-id="8c50d-641">You can remove an instance only for a custom counter.</span></span> <span data-ttu-id="8c50d-642">Все системные счетчики доступны только для чтения, поэтому попытка удалить один из них вызовет исключение.</span><span class="sxs-lookup"><span data-stu-id="8c50d-642">All system counters are read-only, so attempting to remove one of them throws an exception.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-643">Чтобы избежать возможного состояния гонки при освобождении общей памяти счетчика производительности, рекомендуется вызывать метод <xref:System.Diagnostics.PerformanceCounter.RemoveInstance%2A> из обработчика событий <xref:System.AppDomain.DomainUnload>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-643">To avoid a possible race condition when the performance counter shared memory is released, it is recommended that the <xref:System.Diagnostics.PerformanceCounter.RemoveInstance%2A> method be called from the <xref:System.AppDomain.DomainUnload> event handler.</span></span>  
  
 <span data-ttu-id="8c50d-644">Чтобы создать экземпляр категории производительности, укажите `instanceName` в конструкторе <xref:System.Diagnostics.PerformanceCounter.%23ctor%2A>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-644">To create a performance category instance, specify an `instanceName` on the <xref:System.Diagnostics.PerformanceCounter.%23ctor%2A> constructor.</span></span> <span data-ttu-id="8c50d-645">Если экземпляр категории, заданный с помощью `instanceName`, уже существует, новый объект будет ссылаться на существующий экземпляр категории.</span><span class="sxs-lookup"><span data-stu-id="8c50d-645">If the category instance specified by `instanceName` already exists the new object will reference the existing category instance.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8c50d-646">Если значение свойства <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> и Категория счетчика производительности была создана с помощью .NET Framework версии 1,0 или 1,1, создается <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-646">If the value for the <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> property is <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Process> and the performance counter category was created with .NET Framework version 1.0 or 1.1, an <xref:System.InvalidOperationException> is thrown.</span></span> <span data-ttu-id="8c50d-647">Категории счетчиков производительности, созданные в более ранних версиях, используют глобальную общую память, а значение для <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> должно быть <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span><span class="sxs-lookup"><span data-stu-id="8c50d-647">Performance counter categories created with earlier versions use global shared memory, and the value for <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A> must be <xref:System.Diagnostics.PerformanceCounterInstanceLifetime.Global>.</span></span> <span data-ttu-id="8c50d-648">Если категория не используется приложениями, работающими в версиях 1,0 или 1,1 .NET Framework, удалите категорию и создайте ее заново.</span><span class="sxs-lookup"><span data-stu-id="8c50d-648">If the category is not used by applications running on versions 1.0 or 1.1 of the .NET Framework, delete and recreate the category.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException"><span data-ttu-id="8c50d-649">Счетчик доступен только для чтения, поэтому любой экземпляр, связанный с данной категорией, не может быть удален.</span><span class="sxs-lookup"><span data-stu-id="8c50d-649">This counter is read-only, so any instance that is associated with the category cannot be removed.</span></span>  
  
<span data-ttu-id="8c50d-650">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-650">-or-</span></span> 
<span data-ttu-id="8c50d-651">Экземпляр класса, неправильно связанный со счетчиком производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-651">The instance is not correctly associated with a performance counter.</span></span>  
  
<span data-ttu-id="8c50d-652">- или -</span><span class="sxs-lookup"><span data-stu-id="8c50d-652">-or-</span></span> 
<span data-ttu-id="8c50d-653">При использовании глобальной общей памяти свойству <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> присваивается значение <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-653">The <see cref="P:System.Diagnostics.PerformanceCounter.InstanceLifetime" /> property is set to <see cref="F:System.Diagnostics.PerformanceCounterInstanceLifetime.Process" /> when using global shared memory.</span></span></exception>
        <exception cref="T:System.ComponentModel.Win32Exception"><span data-ttu-id="8c50d-654">Произошла ошибка при обращении к API-интерфейсу системы.</span><span class="sxs-lookup"><span data-stu-id="8c50d-654">An error occurred when accessing a system API.</span></span></exception>
        <permission cref="T:System.Diagnostics.PerformanceCounterPermission"><span data-ttu-id="8c50d-655">для записи категории счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="8c50d-655">for writing the performance counter category.</span></span> <span data-ttu-id="8c50d-656">Связанное перечисление: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span><span class="sxs-lookup"><span data-stu-id="8c50d-656">Associated enumeration: <see cref="F:System.Diagnostics.PerformanceCounterPermissionAccess.Write" />.</span></span></permission>
      </Docs>
    </Member>
  </Members>
</Type>
